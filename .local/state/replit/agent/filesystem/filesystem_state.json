{"file_contents":{"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"backup_20251108_110344/tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Home from \"@/pages/Home\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":699},"client/src/components/RealtimeVoice.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { Mic, MicOff, Volume2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface RealtimeVoiceProps {\n  onTranscript?: (transcript: string, isUser: boolean) => void;\n  onSearchLocation?: (query: string) => Promise<{ success: boolean; location?: { lat: number; lng: number }; address?: string; error?: string }>;\n  onCenterMap?: (lat: number, lng: number, zoom?: number) => void;\n  onAddMarker?: (lat: number, lng: number, label?: string) => void;\n  onGetDirections?: (origin: string, destination: string) => Promise<{ success: boolean; route?: any; distance?: string; duration?: string; error?: string }>;\n  onCompareTransportation?: (origin: string, destination: string) => Promise<{ success: boolean; options?: any[]; error?: string }>;\n  onFindNearbyPlaces?: (latitude: number, longitude: number, type?: string, radius?: number) => Promise<{ success: boolean; places?: any[]; count?: number; error?: string }>;\n}\n\nexport default function RealtimeVoice({ onTranscript, onSearchLocation, onCenterMap, onAddMarker, onGetDirections, onCompareTransportation, onFindNearbyPlaces }: RealtimeVoiceProps) {\n  const [isConnected, setIsConnected] = useState(false);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const { toast } = useToast();\n  \n  const peerConnectionRef = useRef<RTCPeerConnection | null>(null);\n  const dataChannelRef = useRef<RTCDataChannel | null>(null);\n  const audioElementRef = useRef<HTMLAudioElement | null>(null);\n  const localStreamRef = useRef<MediaStream | null>(null);\n\n  const startConversation = async () => {\n    setIsConnecting(true);\n    \n    try {\n      // Get ephemeral session key from backend\n      const sessionResponse = await fetch(\"/api/session\", {\n        method: \"POST\",\n      });\n\n      if (!sessionResponse.ok) {\n        throw new Error(\"Failed to create session\");\n      }\n\n      const sessionData = await sessionResponse.json();\n      const ephemeralKey = sessionData.client_secret.value;\n\n      // Create peer connection\n      const pc = new RTCPeerConnection();\n      peerConnectionRef.current = pc;\n\n      // Get user's microphone\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n        } \n      });\n      \n      localStreamRef.current = stream;\n      \n      // Add microphone track to peer connection\n      stream.getTracks().forEach(track => {\n        pc.addTrack(track, stream);\n      });\n\n      // Create data channel for events\n      const dc = pc.createDataChannel(\"oai-events\");\n      dataChannelRef.current = dc;\n\n      dc.addEventListener(\"open\", () => {\n        console.log(\"Data channel opened\");\n        // Send initial configuration with map interaction tools\n        dc.send(JSON.stringify({\n          type: \"session.update\",\n          session: {\n            instructions: `You are Aroha, a friendly travel companion helping people explore through this interactive map.\n\nCommunication style:\n- Keep responses SHORT and to the point - 1-2 sentences maximum\n- Be warm and conversational, but concise\n- Only elaborate if specifically asked for more details\n- Share fun facts sparingly - only when highly relevant\n\nYour approach:\n1. Answer directly and briefly\n2. Use tools immediately when needed\n3. Offer one specific suggestion instead of multiple options\n4. Save detailed explanations for when users ask \"why\" or \"tell me more\"\n\nVisual journey blocks:\n- When you use compare_transportation successfully, users see color-coded journey blocks below the chat\n- Purple blocks = Metro, Green = Bus, Cyan = Uber/Ola, Gray = Walking\n- Each block shows the stage, fare, and duration\n- You can reference these visually: \"Check the blocks below\" or \"The purple metro route wins\"\n- Don't describe every stage verbally - the blocks show the details\n- Focus on highlighting the best option or notable tradeoffs\n- If blocks can't load or tool fails, stay brief and mention what you found without the visual\n\nTool usage:\n- search_location: Find places or locations\n- get_directions: Get routes from A to B (shows route on map)\n- compare_transportation: Show all transport options with visual journey blocks (only works for Bengaluru/Bangalore trips; for other cities, use get_directions instead)\n- find_nearby_places: Find restaurants, shops, cafes nearby\n- center_map, add_marker: Highlight locations\n\nExample responses:\n❌ \"I'd be happy to help you find restaurants! There are many great options in that area. Would you prefer casual dining or something more upscale? I can search for Italian, Indian, or local cuisine...\"\n✅ \"Sure! Let me find restaurants nearby.\" [then use find_nearby_places tool]\n\n❌ \"Getting from A to B is easy! First walk to the metro station which takes about 5 minutes and costs nothing. Then take the purple line metro for 15 rupees which takes 20 minutes. Finally walk 3 minutes to your destination...\"\n✅ \"Metro is your best bet at ₹25 - check the journey blocks below!\" [after successful compare_transportation in Bengaluru]\n\n❌ \"I can show you directions but transportation cost comparison is only available in Bangalore. However, I can still show you the route on the map if you'd like. Would you prefer to see just the route or would you like more information about your options?\"\n✅ \"It's about 10 km and takes 25 minutes by car.\" [after get_directions for non-Bengaluru trips]\n\nAlways be helpful and friendly, just keep it brief!`,\n            voice: \"alloy\",\n            turn_detection: {\n              type: \"server_vad\",\n              threshold: 0.5,\n              prefix_padding_ms: 300,\n              silence_duration_ms: 500,\n            },\n            tools: [\n              {\n                type: \"function\",\n                name: \"search_location\",\n                description: \"Search for a location on the map by name or address. Use this whenever the user asks about finding a place, getting directions, or wants to see a specific location.\",\n                parameters: {\n                  type: \"object\",\n                  properties: {\n                    query: {\n                      type: \"string\",\n                      description: \"The location name or address to search for (e.g., 'Eiffel Tower', 'coffee shop near me', 'New York City')\"\n                    }\n                  },\n                  required: [\"query\"]\n                }\n              },\n              {\n                type: \"function\",\n                name: \"center_map\",\n                description: \"Center the map on specific coordinates. Use this after finding a location to focus on it.\",\n                parameters: {\n                  type: \"object\",\n                  properties: {\n                    latitude: {\n                      type: \"number\",\n                      description: \"The latitude coordinate\"\n                    },\n                    longitude: {\n                      type: \"number\",\n                      description: \"The longitude coordinate\"\n                    },\n                    zoom: {\n                      type: \"number\",\n                      description: \"The zoom level (1-20, default 15)\"\n                    }\n                  },\n                  required: [\"latitude\", \"longitude\"]\n                }\n              },\n              {\n                type: \"function\",\n                name: \"add_marker\",\n                description: \"Add a marker to the map at specific coordinates with an optional label.\",\n                parameters: {\n                  type: \"object\",\n                  properties: {\n                    latitude: {\n                      type: \"number\",\n                      description: \"The latitude coordinate\"\n                    },\n                    longitude: {\n                      type: \"number\",\n                      description: \"The longitude coordinate\"\n                    },\n                    label: {\n                      type: \"string\",\n                      description: \"Optional label for the marker\"\n                    }\n                  },\n                  required: [\"latitude\", \"longitude\"]\n                }\n              },\n              {\n                type: \"function\",\n                name: \"get_directions\",\n                description: \"Get directions and show the route between two locations. Use this when users ask about routes, directions, or how to get from one place to another.\",\n                parameters: {\n                  type: \"object\",\n                  properties: {\n                    origin: {\n                      type: \"string\",\n                      description: \"The starting location (can be an address, place name, or coordinates)\"\n                    },\n                    destination: {\n                      type: \"string\",\n                      description: \"The destination location (can be an address, place name, or coordinates)\"\n                    }\n                  },\n                  required: [\"origin\", \"destination\"]\n                }\n              },\n              {\n                type: \"function\",\n                name: \"compare_transportation\",\n                description: \"Compare all available transportation options (metro, bus, Uber, train) between two locations IN BENGALURU/BANGALORE ONLY with visual journey blocks showing each stage. Use this when BOTH locations are in Bengaluru and users ask about: travel costs, prices, cheapest option, how to get somewhere, or want to compare different ways to travel. For non-Bengaluru trips, use get_directions instead. Displays color-coded blocks showing Walk→Metro→Bus→Uber progression with fares and durations.\",\n                parameters: {\n                  type: \"object\",\n                  properties: {\n                    origin: {\n                      type: \"string\",\n                      description: \"The starting location (can be an address, place name, or coordinates)\"\n                    },\n                    destination: {\n                      type: \"string\",\n                      description: \"The destination location (can be an address, place name, or coordinates)\"\n                    }\n                  },\n                  required: [\"origin\", \"destination\"]\n                }\n              },\n              {\n                type: \"function\",\n                name: \"find_nearby_places\",\n                description: \"Find nearby restaurants, shops, cafes, or other points of interest around a specific location. Use this when users ask to find nearby places, want restaurant recommendations, or are looking for shops/services in an area. Returns up to 20 places with ratings, addresses, and opening hours.\",\n                parameters: {\n                  type: \"object\",\n                  properties: {\n                    latitude: {\n                      type: \"number\",\n                      description: \"The latitude of the center point to search around\"\n                    },\n                    longitude: {\n                      type: \"number\",\n                      description: \"The longitude of the center point to search around\"\n                    },\n                    type: {\n                      type: \"string\",\n                      description: \"The type of place to search for. Common types: restaurant, cafe, bar, store, shopping_mall, grocery_or_supermarket, pharmacy, hospital, atm, bank, gas_station, park, gym, museum, tourist_attraction\",\n                      enum: [\"restaurant\", \"cafe\", \"bar\", \"store\", \"shopping_mall\", \"grocery_or_supermarket\", \"pharmacy\", \"hospital\", \"atm\", \"bank\", \"gas_station\", \"park\", \"gym\", \"museum\", \"tourist_attraction\"]\n                    },\n                    radius: {\n                      type: \"number\",\n                      description: \"Search radius in meters (default: 1500, max: 50000). Use smaller radius (500-1000) for immediate area, larger (2000-5000) for broader search.\"\n                    }\n                  },\n                  required: [\"latitude\", \"longitude\"]\n                }\n              }\n            ],\n            tool_choice: \"auto\"\n          },\n        }));\n      });\n\n      dc.addEventListener(\"message\", async (e) => {\n        try {\n          const event = JSON.parse(e.data);\n          console.log(\"Event received:\", event.type);\n\n          if (event.type === \"conversation.item.input_audio_transcription.completed\") {\n            console.log(\"User said:\", event.transcript);\n            onTranscript?.(event.transcript, true);\n          } else if (event.type === \"response.audio_transcript.delta\") {\n            // AI is speaking\n            setIsSpeaking(true);\n          } else if (event.type === \"response.audio_transcript.done\") {\n            console.log(\"AI said:\", event.transcript);\n            onTranscript?.(event.transcript, false);\n            setIsSpeaking(false);\n          } else if (event.type === \"response.function_call_arguments.done\") {\n            // AI wants to call a function\n            const { call_id, name, arguments: argsString } = event;\n            console.log(`Function call: ${name}`, argsString);\n            \n            try {\n              const args = JSON.parse(argsString);\n              let result: any = { success: false, error: \"Unknown function\" };\n\n              // Execute the appropriate function\n              if (name === \"search_location\" && onSearchLocation) {\n                result = await onSearchLocation(args.query);\n              } else if (name === \"center_map\" && onCenterMap) {\n                onCenterMap(args.latitude, args.longitude, args.zoom);\n                result = { success: true, message: \"Map centered\" };\n              } else if (name === \"add_marker\" && onAddMarker) {\n                onAddMarker(args.latitude, args.longitude, args.label);\n                result = { success: true, message: \"Marker added\" };\n              } else if (name === \"get_directions\" && onGetDirections) {\n                result = await onGetDirections(args.origin, args.destination);\n              } else if (name === \"compare_transportation\" && onCompareTransportation) {\n                result = await onCompareTransportation(args.origin, args.destination);\n              } else if (name === \"find_nearby_places\" && onFindNearbyPlaces) {\n                result = await onFindNearbyPlaces(args.latitude, args.longitude, args.type, args.radius);\n              }\n\n              // Send function result back to AI\n              dc.send(JSON.stringify({\n                type: \"conversation.item.create\",\n                item: {\n                  type: \"function_call_output\",\n                  call_id: call_id,\n                  output: JSON.stringify(result)\n                }\n              }));\n\n              // Tell AI to respond\n              dc.send(JSON.stringify({\n                type: \"response.create\"\n              }));\n\n              console.log(\"Function result sent:\", result);\n            } catch (error) {\n              console.error(\"Function execution error:\", error);\n              // Send error back to AI\n              dc.send(JSON.stringify({\n                type: \"conversation.item.create\",\n                item: {\n                  type: \"function_call_output\",\n                  call_id: call_id,\n                  output: JSON.stringify({ success: false, error: String(error) })\n                }\n              }));\n\n              // Tell AI to respond even after error so it remains responsive\n              dc.send(JSON.stringify({\n                type: \"response.create\"\n              }));\n            }\n          } else if (event.type === \"error\") {\n            console.error(\"Realtime API error:\", event.error);\n            toast({\n              title: \"Error\",\n              description: event.error.message || \"An error occurred\",\n              variant: \"destructive\",\n            });\n          }\n        } catch (error) {\n          console.error(\"Failed to parse event:\", error);\n        }\n      });\n\n      // Handle incoming audio\n      pc.addEventListener(\"track\", (e) => {\n        console.log(\"[Audio] Received remote track\", e);\n        const remoteStream = e.streams[0];\n        \n        if (audioElementRef.current) {\n          console.log(\"[Audio] Setting srcObject to remote stream\");\n          audioElementRef.current.srcObject = remoteStream;\n          audioElementRef.current.volume = 1.0;\n          audioElementRef.current.muted = false;\n          \n          // Wait for the stream to be ready before playing\n          audioElementRef.current.onloadedmetadata = () => {\n            console.log(\"[Audio] Metadata loaded, attempting to play\");\n            audioElementRef.current!.play()\n              .then(() => {\n                console.log(\"[Audio] Audio playing successfully - you should hear sound now!\");\n              })\n              .catch(err => {\n                console.error(\"[Audio] Play failed:\", err);\n                toast({\n                  title: \"Audio playback blocked\",\n                  description: \"Click anywhere on the page to enable audio\",\n                  variant: \"destructive\",\n                });\n              });\n          };\n          \n          // Fallback: try playing immediately too\n          audioElementRef.current.play()\n            .then(() => console.log(\"[Audio] Immediate play succeeded\"))\n            .catch(() => console.log(\"[Audio] Immediate play blocked, waiting for metadata\"));\n        } else {\n          console.error(\"[Audio] Audio element not found in DOM!\");\n        }\n      });\n\n      // Create and set local description\n      const offer = await pc.createOffer();\n      await pc.setLocalDescription(offer);\n\n      // Send offer to OpenAI with model query parameter\n      const sdpResponse = await fetch(\"https://api.openai.com/v1/realtime?model=gpt-4o-realtime-preview-2024-12-17\", {\n        method: \"POST\",\n        headers: {\n          \"Authorization\": `Bearer ${ephemeralKey}`,\n          \"Content-Type\": \"application/sdp\",\n        },\n        body: offer.sdp,\n      });\n\n      if (!sdpResponse.ok) {\n        throw new Error(\"Failed to connect to OpenAI\");\n      }\n\n      const answerSdp = await sdpResponse.text();\n      const answer: RTCSessionDescriptionInit = {\n        type: \"answer\",\n        sdp: answerSdp,\n      };\n      await pc.setRemoteDescription(answer);\n\n      setIsConnected(true);\n      setIsConnecting(false);\n      \n      toast({\n        title: \"Connected\",\n        description: \"Real-time conversation started. Start speaking!\",\n      });\n    } catch (error) {\n      console.error(\"Connection error:\", error);\n      setIsConnecting(false);\n      const errorMessage = error instanceof Error ? error.message : \"Failed to start conversation\";\n      toast({\n        title: \"Connection failed\",\n        description: errorMessage,\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const stopConversation = () => {\n    // Stop local microphone tracks\n    if (localStreamRef.current) {\n      localStreamRef.current.getTracks().forEach(track => track.stop());\n      localStreamRef.current = null;\n    }\n    \n    if (peerConnectionRef.current) {\n      peerConnectionRef.current.close();\n      peerConnectionRef.current = null;\n    }\n    \n    if (dataChannelRef.current) {\n      dataChannelRef.current.close();\n      dataChannelRef.current = null;\n    }\n\n    if (audioElementRef.current) {\n      audioElementRef.current.srcObject = null;\n    }\n\n    setIsConnected(false);\n    setIsSpeaking(false);\n    \n    toast({\n      title: \"Disconnected\",\n      description: \"Conversation ended\",\n    });\n  };\n\n  const handleToggle = () => {\n    if (isConnected) {\n      stopConversation();\n    } else {\n      startConversation();\n    }\n  };\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (peerConnectionRef.current) {\n        peerConnectionRef.current.close();\n      }\n    };\n  }, []);\n\n  return (\n    <div className=\"fixed bottom-8 left-1/2 -translate-x-1/2 z-50\">\n      {/* Hidden audio element for playback */}\n      <audio \n        ref={(el) => {\n          if (el && !audioElementRef.current) {\n            audioElementRef.current = el;\n            console.log(\"[Audio] Audio element attached to DOM\");\n          }\n        }}\n        autoPlay\n        playsInline\n        style={{ display: 'none' }}\n      />\n      \n      <div className=\"flex flex-col items-center gap-2\">\n        {isConnected && (\n          <div className=\"text-xs text-cyan-400 font-medium px-4 py-2 bg-black/70 border border-cyan-500/30 rounded-full backdrop-blur-sm\" data-testid=\"status-connected\">\n            {isSpeaking ? (\n              <span className=\"flex items-center gap-2\">\n                <Volume2 className=\"w-3 h-3 animate-pulse\" />\n                AI Speaking...\n              </span>\n            ) : (\n              <span className=\"flex items-center gap-2\">\n                <Mic className=\"w-3 h-3\" />\n                Listening...\n              </span>\n            )}\n          </div>\n        )}\n        \n        <div className=\"relative group\">\n          <button\n            onClick={handleToggle}\n            disabled={isConnecting}\n            data-testid=\"button-voice-toggle\"\n            className={`relative w-20 h-20 rounded-full transition-all duration-300 border-2 flex items-center justify-center ${\n              isConnecting\n                ? \"bg-black/80 border-yellow-500 shadow-[0_0_40px_rgba(234,179,8,0.6)] animate-pulse cursor-wait\"\n                : isConnected\n                ? \"bg-black/80 border-red-500 shadow-[0_0_40px_rgba(239,68,68,0.6)] scale-105\"\n                : \"bg-black/70 border-cyan-500 shadow-[0_0_25px_rgba(6,182,212,0.4)] hover:shadow-[0_0_45px_rgba(6,182,212,0.7)] hover:scale-105 hover:bg-black/85\"\n            }`}\n          >\n            {isConnected ? (\n              <MicOff \n                className=\"w-8 h-8 text-red-500 drop-shadow-[0_0_10px_rgba(239,68,68,0.9)]\"\n              />\n            ) : (\n              <Mic \n                className={`transition-all duration-300 ${\n                  isConnecting\n                    ? \"w-8 h-8 text-yellow-500 drop-shadow-[0_0_10px_rgba(234,179,8,0.9)]\"\n                    : \"w-8 h-8 text-cyan-400 drop-shadow-[0_0_8px_rgba(6,182,212,0.8)] group-hover:drop-shadow-[0_0_12px_rgba(6,182,212,1)]\"\n                }`}\n              />\n            )}\n          </button>\n          \n          {isConnected && isSpeaking && (\n            <div className=\"absolute top-0 right-0 w-4 h-4 bg-green-500 rounded-full animate-pulse shadow-[0_0_12px_rgba(34,197,94,0.9)]\" data-testid=\"indicator-speaking\" />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":22740},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/pages/Home.tsx":{"content":"import { useState, useRef } from \"react\";\nimport MapContainer, { MapContainerRef } from \"@/components/MapContainer\";\nimport RealtimeVoice from \"@/components/RealtimeVoice\";\nimport { JourneyProgressCard } from \"@/components/JourneyProgressCard\";\nimport { MapPin, X, Map, Satellite, Maximize, Minimize } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface JourneyStage {\n  stage: string;\n  mode: 'walk' | 'metro' | 'uber' | 'bus' | 'train';\n  provider?: string;\n  fare: number;\n  duration?: number;\n  description: string;\n}\n\ninterface TransportJourney {\n  journeyName: string;\n  totalFare: number;\n  totalDuration?: number;\n  stages: JourneyStage[];\n  recommendation?: string;\n}\n\ninterface ConversationTurn {\n  text: string;\n  isUser: boolean;\n  timestamp: Date;\n  journeyData?: {\n    journeys: TransportJourney[];\n    origin?: string;\n    destination?: string;\n  };\n}\n\nexport default function Home() {\n  const [currentLocation, setCurrentLocation] = useState<{ lat: number; lng: number } | null>(null);\n  const [conversation, setConversation] = useState<ConversationTurn[]>([]);\n  const [isMapVisible, setIsMapVisible] = useState(false);\n  const [mapType, setMapType] = useState<'roadmap' | 'satellite' | 'hybrid'>('roadmap');\n  const [lastJourneyData, setLastJourneyData] = useState<ConversationTurn['journeyData'] | null>(null);\n  const [isJourneyExpanded, setIsJourneyExpanded] = useState(false);\n  const mapRef = useRef<MapContainerRef>(null);\n\n  const handleLocationChange = (location: { lat: number; lng: number }) => {\n    setCurrentLocation(location);\n    console.log('Location updated:', location);\n  };\n  \n  const handleMapReady = () => {\n    console.log(\"[Home] Map is ready for use\");\n  };\n\n  const handleTranscript = (text: string, isUser: boolean) => {\n    // If this is an AI response and we have journey data, attach it\n    if (!isUser && lastJourneyData) {\n      setConversation(prev => [...prev, { \n        text, \n        isUser, \n        timestamp: new Date(),\n        journeyData: lastJourneyData \n      }]);\n      setLastJourneyData(null); // Clear after attaching\n    } else {\n      setConversation(prev => [...prev, { text, isUser, timestamp: new Date() }]);\n    }\n  };\n\n  const handleMapTypeChange = (type: 'roadmap' | 'satellite' | 'hybrid') => {\n    setMapType(type);\n    mapRef.current?.setMapType(type);\n  };\n\n  // Helper to wait for map ref to be available\n  const waitForMapRef = async (maxWaitMs: number = 1000): Promise<boolean> => {\n    const startTime = Date.now();\n    while (!mapRef.current && Date.now() - startTime < maxWaitMs) {\n      await new Promise(resolve => setTimeout(resolve, 50));\n    }\n    return mapRef.current !== null;\n  };\n\n  // Map interaction handlers for AI\n  const handleSearchLocation = async (query: string) => {\n    // Show map first so it mounts and creates the ref\n    setIsMapVisible(true);\n    \n    // Wait for the map ref to be available\n    const hasRef = await waitForMapRef();\n    if (!hasRef) {\n      return { success: false, error: \"Map component failed to mount\" };\n    }\n    \n    try {\n      // Wait for map to be ready before searching\n      await mapRef.current!.ensureReady();\n      return await mapRef.current!.searchLocation(query);\n    } catch (error) {\n      console.error(\"Error waiting for map:\", error);\n      return { success: false, error: \"Map initialization error\" };\n    }\n  };\n\n  const handleCenterMap = async (lat: number, lng: number, zoom?: number) => {\n    // Show map first\n    setIsMapVisible(true);\n    \n    const hasRef = await waitForMapRef();\n    if (!hasRef) return;\n    \n    try {\n      await mapRef.current!.ensureReady();\n      mapRef.current!.centerMap(lat, lng, zoom);\n    } catch (error) {\n      console.error(\"Error waiting for map:\", error);\n    }\n  };\n\n  const handleAddMarker = async (lat: number, lng: number, label?: string) => {\n    // Show map first\n    setIsMapVisible(true);\n    \n    const hasRef = await waitForMapRef();\n    if (!hasRef) return;\n    \n    try {\n      await mapRef.current!.ensureReady();\n      mapRef.current!.addMarker(lat, lng, label);\n    } catch (error) {\n      console.error(\"Error waiting for map:\", error);\n    }\n  };\n\n  const handleGetDirections = async (origin: string, destination: string) => {\n    try {\n      setIsMapVisible(true); // Show map when getting directions\n      \n      // Wait for map to be ready\n      if (mapRef.current) {\n        await mapRef.current.ensureReady();\n      }\n      \n      const response = await fetch(\"/api/directions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ origin, destination }),\n      });\n\n      const data = await response.json();\n\n      if (data.success && data.route && mapRef.current) {\n        // Draw the route on the map\n        mapRef.current.drawRoute(data.route.polyline, data.route.bounds);\n        \n        return {\n          success: true,\n          route: data.route,\n          distance: data.distance,\n          duration: data.duration,\n        };\n      } else {\n        return {\n          success: false,\n          error: data.error || \"Failed to get directions\",\n        };\n      }\n    } catch (error) {\n      console.error(\"Directions error:\", error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : \"Failed to get directions\",\n      };\n    }\n  };\n\n  const handleCompareTransportation = async (origin: string, destination: string) => {\n    try {\n      // Show the map when comparing transportation\n      setIsMapVisible(true);\n      \n      // Wait for map to be ready\n      if (mapRef.current) {\n        await mapRef.current.ensureReady();\n      }\n\n      // Get distance and route using Google Directions API\n      const directionsResponse = await fetch(\"/api/directions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ origin, destination }),\n      });\n\n      const directionsData = await directionsResponse.json();\n\n      if (!directionsData.success) {\n        return {\n          success: false,\n          error: directionsData.error || \"Could not calculate distance\",\n        };\n      }\n\n      // Draw the route on the map so user can see the path\n      if (directionsData.route && mapRef.current) {\n        mapRef.current.drawRoute(directionsData.route.polyline, directionsData.route.bounds);\n      }\n\n      // Extract numeric distance and convert to km\n      const distanceText = directionsData.distance;\n      let distanceKm: number;\n      \n      if (distanceText.includes('km')) {\n        // Distance is in kilometers\n        distanceKm = parseFloat(distanceText.replace(/[^0-9.]/g, ''));\n      } else if (distanceText.includes('m')) {\n        // Distance is in meters, convert to kilometers\n        const meters = parseFloat(distanceText.replace(/[^0-9.]/g, ''));\n        distanceKm = meters / 1000;\n      } else {\n        // Fallback: assume kilometers\n        distanceKm = parseFloat(distanceText.replace(/[^0-9.]/g, ''));\n      }\n\n      // Use coordinates from directions API (no need to search again!)\n      const fromLat = directionsData.startLocation.lat;\n      const fromLng = directionsData.startLocation.lng;\n      const toLat = directionsData.endLocation.lat;\n      const toLng = directionsData.endLocation.lng;\n\n      // Call transportation journeys API\n      const response = await fetch(\"/api/transportation/journeys\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          fromLat,\n          fromLng,\n          toLat,\n          toLng,\n          distanceKm: distanceKm,\n        }),\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        // Store journey data to be attached to next AI response\n        const journeyInfo = {\n          journeys: data.journeys,\n          origin: directionsData.startAddress,\n          destination: directionsData.endAddress,\n        };\n        setLastJourneyData(journeyInfo);\n\n        return {\n          success: true,\n          journeys: data.journeys,\n          distance: directionsData.distance,\n          duration: directionsData.duration,\n        };\n      } else {\n        return {\n          success: false,\n          error: data.error || \"Failed to get transportation journeys\",\n        };\n      }\n    } catch (error) {\n      console.error(\"Transportation comparison error:\", error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : \"Failed to compare transportation\",\n      };\n    }\n  };\n\n  const handleFindNearbyPlaces = async (latitude: number, longitude: number, type?: string, radius?: number) => {\n    try {\n      // Show the map when finding nearby places\n      setIsMapVisible(true);\n      \n      // Wait for map to be ready\n      if (mapRef.current) {\n        await mapRef.current.ensureReady();\n      }\n\n      const response = await fetch(\"/api/places/nearby\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ latitude, longitude, type, radius }),\n      });\n\n      const data = await response.json();\n\n      if (data.success && data.places && data.places.length > 0 && mapRef.current) {\n        // Display places on the map\n        mapRef.current.showPlaces(data.places);\n        \n        return {\n          success: true,\n          places: data.places,\n          count: data.count,\n        };\n      } else if (data.success && data.count === 0) {\n        // Clear any existing markers when no results found\n        if (mapRef.current) {\n          mapRef.current.clearPlaces();\n        }\n        \n        return {\n          success: true,\n          places: [],\n          count: 0,\n          message: data.message || \"No places found nearby\",\n        };\n      } else {\n        // Clear markers on error to avoid showing stale data\n        if (mapRef.current) {\n          mapRef.current.clearPlaces();\n        }\n        \n        return {\n          success: false,\n          error: data.error || \"Failed to find nearby places\",\n        };\n      }\n    } catch (error) {\n      console.error(\"Find nearby places error:\", error);\n      \n      // Clear markers on exception\n      if (mapRef.current) {\n        mapRef.current.clearPlaces();\n      }\n      \n      return {\n        success: false,\n        error: error instanceof Error ? error.message : \"Failed to find nearby places\",\n      };\n    }\n  };\n\n  // Find the most recent journey data from AI messages\n  const currentJourneyData = [...conversation]\n    .reverse()\n    .find(turn => !turn.isUser && turn.journeyData)?.journeyData;\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4 pb-32 bg-gradient-to-br from-gray-900 via-black to-gray-950 relative overflow-hidden\">\n      <div className=\"absolute inset-0 bg-[radial-gradient(ellipse_at_top_left,_var(--tw-gradient-stops))] from-cyan-900/20 via-transparent to-transparent\" />\n      <div className=\"absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_right,_var(--tw-gradient-stops))] from-blue-900/15 via-transparent to-transparent\" />\n      \n      <div className=\"w-full max-w-7xl h-[calc(100vh-10rem)] relative z-10 flex gap-4\">\n        {/* Conversation Panel - Takes full width when map is hidden */}\n        <div \n          className={`transition-all duration-500 ease-in-out ${\n            isMapVisible ? \"w-1/2\" : \"w-full\"\n          }`}\n        >\n          <div className=\"h-full flex flex-col rounded-lg border border-gray-800 bg-gray-950/50 backdrop-blur-sm shadow-2xl overflow-hidden\">\n            {/* Top Section: Conversation Transcripts */}\n            {!isJourneyExpanded && (\n              <div \n                className={`overflow-y-auto p-6 transition-all duration-500 ${\n                  currentJourneyData ? \"flex-[1.2]\" : \"flex-1\"\n                }`} \n                data-testid=\"conversation-box\"\n              >\n              {conversation.length === 0 ? (\n                <div className=\"h-full flex flex-col items-center justify-center text-center space-y-6\" data-testid=\"text-empty-state\">\n                  <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-cyan-500/20 to-blue-600/20 flex items-center justify-center border border-cyan-500/30\">\n                    <MapPin className=\"w-10 h-10 text-cyan-400\" />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <h3 className=\"text-xl font-semibold text-white\">Welcome!</h3>\n                    <p className=\"text-gray-400 max-w-md\">\n                      Click the microphone below to start a conversation with Aroha. \n                      Ask about places to visit, directions, or travel tips!\n                    </p>\n                  </div>\n                  <div className=\"flex flex-wrap gap-2 justify-center max-w-lg\">\n                    <button\n                      onClick={() => handleSearchLocation(\"Cubbon Park, Bangalore\")}\n                      className=\"px-3 py-1.5 text-xs bg-gray-800/50 text-gray-300 rounded-full border border-gray-700 hover-elevate active-elevate-2 transition-all\"\n                      data-testid=\"button-example-cubbon\"\n                    >\n                      \"Show me Cubbon Park\"\n                    </button>\n                    <button\n                      onClick={() => handleGetDirections(\"Bangalore\", \"Indiranagar, Bangalore\")}\n                      className=\"px-3 py-1.5 text-xs bg-gray-800/50 text-gray-300 rounded-full border border-gray-700 hover-elevate active-elevate-2 transition-all\"\n                      data-testid=\"button-example-indiranagar\"\n                    >\n                      \"Directions to Indiranagar\"\n                    </button>\n                    <button\n                      onClick={() => handleSearchLocation(\"Koramangala, Bangalore\")}\n                      className=\"px-3 py-1.5 text-xs bg-gray-800/50 text-gray-300 rounded-full border border-gray-700 hover-elevate active-elevate-2 transition-all\"\n                      data-testid=\"button-example-koramangala\"\n                    >\n                      \"Hidden gems in Koramangala\"\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {conversation.map((turn, index) => (\n                    <div\n                      key={index}\n                      className=\"animate-in fade-in duration-700\"\n                      data-testid={turn.isUser ? \"text-user-message\" : \"text-ai-message\"}\n                    >\n                      <div className={`flex ${turn.isUser ? \"justify-end\" : \"justify-start\"}`}>\n                        <div\n                          className={`max-w-[85%] rounded-2xl overflow-hidden ${\n                            turn.isUser\n                              ? \"bg-cyan-500/20 border border-cyan-500/30 text-cyan-100\"\n                              : \"bg-gray-800/50 border border-gray-700 text-gray-200\"\n                          }`}\n                        >\n                          {/* Message header and text */}\n                          <div className=\"px-5 py-3.5\">\n                            <div className=\"text-xs font-semibold mb-2 opacity-70 uppercase tracking-wide\">\n                              {turn.isUser ? \"You\" : \"Aroha\"}\n                            </div>\n                            <div className=\"text-[15px] leading-relaxed whitespace-pre-wrap break-words\">\n                              {turn.text}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n            )}\n            \n            {/* Bottom Section: Journey Progression Cards */}\n            {currentJourneyData && (\n              <div \n                className={`${\n                  isJourneyExpanded \n                    ? \"flex-1\" \n                    : \"flex-1 border-t border-gray-700/70\"\n                } bg-gradient-to-b from-gray-900/60 to-gray-950/80 p-6 overflow-y-auto animate-in slide-in-from-bottom duration-500`}\n                data-testid=\"section-journey-cards\"\n              >\n                <div className=\"mb-3 flex items-center justify-between gap-2\">\n                  <div className=\"flex items-center gap-2\">\n                    {isJourneyExpanded && (\n                      <Button\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        onClick={() => setIsJourneyExpanded(false)}\n                        className=\"text-gray-400 hover:text-gray-300 hover:bg-gray-700/50 -ml-2\"\n                        data-testid=\"button-close-journey\"\n                      >\n                        <X className=\"w-4 h-4 mr-2\" />\n                        Back to Chat\n                      </Button>\n                    )}\n                    <div className=\"h-1 w-1 rounded-full bg-cyan-400\" />\n                    <h3 className=\"text-sm font-semibold text-cyan-400 uppercase tracking-wide\">\n                      Transportation Options <span className=\"text-xs text-muted-foreground normal-case\">(approximate estimation)</span>\n                    </h3>\n                  </div>\n                  {!isJourneyExpanded && (\n                    <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={() => setIsJourneyExpanded(true)}\n                      className=\"text-cyan-400 hover:text-cyan-300 hover:bg-cyan-400/10\"\n                      data-testid=\"button-expand-journey\"\n                    >\n                      <Maximize className=\"w-4 h-4 mr-2\" />\n                      Expand\n                    </Button>\n                  )}\n                </div>\n                <JourneyProgressCard\n                  journeys={currentJourneyData.journeys}\n                  origin={currentJourneyData.origin}\n                  destination={currentJourneyData.destination}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        \n        {/* Map Panel - Slides in from right when visible */}\n        <div \n          className={`transition-all duration-700 ease-out ${\n            isMapVisible ? \"w-1/2 opacity-100\" : \"w-0 opacity-0\"\n          } overflow-hidden`}\n        >\n          {isMapVisible && (\n            <div className=\"h-full rounded-lg overflow-hidden border border-gray-800 shadow-2xl relative animate-in fade-in duration-700\">\n              <div className=\"absolute top-3 left-3 z-[1000]\">\n                <Button\n                  size=\"sm\"\n                  variant=\"ghost\"\n                  onClick={() => setIsMapVisible(false)}\n                  className=\"bg-white/95 backdrop-blur-sm border border-gray-300 hover:bg-white text-gray-700 hover:text-gray-900 shadow-lg\"\n                  data-testid=\"button-hide-map\"\n                >\n                  <X className=\"w-4 h-4 mr-2\" />\n                  Close Map\n                </Button>\n              </div>\n              \n              <div className=\"absolute bottom-32 right-3 z-[1000] flex flex-col gap-2\">\n                <div className=\"flex flex-col gap-1 bg-white/95 backdrop-blur-sm border border-gray-300 rounded-md shadow-lg overflow-hidden\">\n                  <Button\n                    size=\"sm\"\n                    variant={mapType === 'roadmap' ? 'default' : 'ghost'}\n                    onClick={() => handleMapTypeChange('roadmap')}\n                    className={`${mapType === 'roadmap' ? 'bg-gray-700 text-white' : 'text-gray-700 hover:bg-gray-100'} justify-start`}\n                    data-testid=\"button-map-roadmap\"\n                  >\n                    <Map className=\"w-4 h-4 mr-2\" />\n                    Map\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant={mapType === 'satellite' ? 'default' : 'ghost'}\n                    onClick={() => handleMapTypeChange('satellite')}\n                    className={`${mapType === 'satellite' ? 'bg-gray-700 text-white' : 'text-gray-700 hover:bg-gray-100'} justify-start`}\n                    data-testid=\"button-map-satellite\"\n                  >\n                    <Satellite className=\"w-4 h-4 mr-2\" />\n                    Satellite\n                  </Button>\n                </div>\n              </div>\n              <MapContainer \n                ref={mapRef} \n                onLocationChange={handleLocationChange}\n                onReady={handleMapReady}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n      \n      <RealtimeVoice \n        onTranscript={handleTranscript}\n        onSearchLocation={handleSearchLocation}\n        onCenterMap={handleCenterMap}\n        onAddMarker={handleAddMarker}\n        onGetDirections={handleGetDirections}\n        onCompareTransportation={handleCompareTransportation}\n        onFindNearbyPlaces={handleFindNearbyPlaces}\n      />\n    </div>\n  );\n}\n","size_bytes":21163},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"server/storage.ts":{"content":"import { type User, type InsertUser } from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\n\n// modify the interface with any CRUD methods\n// you might need\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<string, User>;\n\n  constructor() {\n    this.users = new Map();\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(\n      (user) => user.username === username,\n    );\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = randomUUID();\n    const user: User = { ...insertUser, id };\n    this.users.set(id, user);\n    return user;\n  }\n}\n\nexport const storage = new MemStorage();\n","size_bytes":993},"backup_20251108_110344/drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"backup-data.sh":{"content":"#!/bin/bash\n\n# Aroha Map App - Quick Backup Script\n# This script helps you backup essential data before self-hosting\n\necho \"==========================================\"\necho \"Aroha Map App - Backup Script\"\necho \"==========================================\"\necho \"\"\n\n# Create backup directory with timestamp\nBACKUP_DIR=\"backup_$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\necho \"✓ Created backup directory: $BACKUP_DIR\"\necho \"\"\n\n# 1. Save environment variables to a file\necho \"📝 Saving environment variables...\"\ncat > \"$BACKUP_DIR/env_variables.txt\" << EOF\n# Environment Variables for Aroha Map App\n# Copy these to your .env file on your self-hosted server\n\nDATABASE_URL=$DATABASE_URL\nOPENAI_API_KEY=$OPENAI_API_KEY\nVITE_GOOGLE_MAPS_API_KEY=$VITE_GOOGLE_MAPS_API_KEY\nNODE_ENV=production\nEOF\necho \"✓ Environment variables saved to $BACKUP_DIR/env_variables.txt\"\necho \"\"\n\n# 2. Copy essential configuration files\necho \"📋 Copying configuration files...\"\ncp package.json \"$BACKUP_DIR/\" 2>/dev/null && echo \"  ✓ package.json\"\ncp package-lock.json \"$BACKUP_DIR/\" 2>/dev/null && echo \"  ✓ package-lock.json\"\ncp tsconfig.json \"$BACKUP_DIR/\" 2>/dev/null && echo \"  ✓ tsconfig.json\"\ncp vite.config.ts \"$BACKUP_DIR/\" 2>/dev/null && echo \"  ✓ vite.config.ts\"\ncp drizzle.config.ts \"$BACKUP_DIR/\" 2>/dev/null && echo \"  ✓ drizzle.config.ts\"\ncp tailwind.config.ts \"$BACKUP_DIR/\" 2>/dev/null && echo \"  ✓ tailwind.config.ts\"\necho \"\"\n\n# 3. Save database schema\necho \"💾 Saving database schema...\"\nif [ -f \"shared/schema.ts\" ]; then\n    cp shared/schema.ts \"$BACKUP_DIR/\"\n    echo \"✓ Database schema saved\"\nelse\n    echo \"⚠ Database schema not found\"\nfi\necho \"\"\n\n# 4. Create installation instructions\necho \"📖 Creating quick start guide...\"\ncat > \"$BACKUP_DIR/QUICK_START.md\" << 'EOF'\n# Quick Start Guide\n\n## On Your New Server\n\n1. **Upload all project files to your server**\n\n2. **Install dependencies**\n   ```bash\n   npm install\n   ```\n\n3. **Create .env file**\n   ```bash\n   cp env_variables.txt .env\n   # Edit .env and update DATABASE_URL if needed\n   ```\n\n4. **Build the application**\n   ```bash\n   npm run build\n   ```\n\n5. **Push database schema**\n   ```bash\n   npx drizzle-kit push:pg\n   ```\n\n6. **Start with PM2**\n   ```bash\n   pm2 start npm --name aroha-app -- run dev\n   pm2 save\n   pm2 startup\n   ```\n\n7. **Access your app**\n   - Local: http://localhost:5000\n   - Public: http://your-server-ip:5000\n\nSee BACKUP_AND_SELFHOST_GUIDE.md for complete instructions.\nEOF\necho \"✓ Quick start guide created\"\necho \"\"\n\n# 5. Create list of required API keys\necho \"🔑 Creating API keys checklist...\"\ncat > \"$BACKUP_DIR/API_KEYS_CHECKLIST.md\" << 'EOF'\n# API Keys Checklist\n\nBefore deploying, ensure you have:\n\n## Required API Keys\n\n- [ ] **OpenAI API Key**\n  - Get from: https://platform.openai.com/api-keys\n  - Used for: Real-time voice conversations\n  - Cost: Pay-per-use (audio minutes)\n\n- [ ] **Google Maps API Key**\n  - Get from: https://console.cloud.google.com/google/maps-apis\n  - Required APIs to enable:\n    - Maps JavaScript API\n    - Places API\n    - Directions API\n    - Geocoding API\n  - Cost: Free tier available (28,000 map loads/month)\n  - IMPORTANT: Must be prefixed with VITE_ in .env file\n\n## Database\n\n- [ ] **PostgreSQL Database URL**\n  - Recommended: Keep using Neon (free tier) or Supabase\n  - Format: postgresql://user:password@host:port/database\n  - Or self-host PostgreSQL on your server\n\n## Testing\n\nAfter deployment, test:\n- [ ] Voice conversation works\n- [ ] Map loads correctly  \n- [ ] Location search works\n- [ ] Directions work\n- [ ] Transportation pricing shows\nEOF\necho \"✓ API keys checklist created\"\necho \"\"\n\n# Summary\necho \"==========================================\"\necho \"✓ Backup Complete!\"\necho \"==========================================\"\necho \"\"\necho \"Backup saved to: ./$BACKUP_DIR\"\necho \"\"\necho \"📦 Contents:\"\necho \"  - env_variables.txt (your environment variables)\"\necho \"  - Configuration files (package.json, tsconfig.json, etc.)\"\necho \"  - Database schema (schema.ts)\"\necho \"  - QUICK_START.md (deployment instructions)\"\necho \"  - API_KEYS_CHECKLIST.md (required API keys)\"\necho \"\"\necho \"📋 Next Steps:\"\necho \"  1. Download this entire project as ZIP from Replit\"\necho \"  2. Copy the backup folder to your local machine\"\necho \"  3. Follow BACKUP_AND_SELFHOST_GUIDE.md for full setup\"\necho \"  4. Upload everything to your new server\"\necho \"\"\necho \"💡 Tip: Use 'scp -r $BACKUP_DIR user@server:/path/' to copy files\"\necho \"\"\n","size_bytes":4492},"backup_20251108_110344/API_KEYS_CHECKLIST.md":{"content":"# API Keys Checklist\n\nBefore deploying, ensure you have:\n\n## Required API Keys\n\n- [ ] **OpenAI API Key**\n  - Get from: https://platform.openai.com/api-keys\n  - Used for: Real-time voice conversations\n  - Cost: Pay-per-use (audio minutes)\n\n- [ ] **Google Maps API Key**\n  - Get from: https://console.cloud.google.com/google/maps-apis\n  - Required APIs to enable:\n    - Maps JavaScript API\n    - Places API\n    - Directions API\n    - Geocoding API\n  - Cost: Free tier available (28,000 map loads/month)\n  - IMPORTANT: Must be prefixed with VITE_ in .env file\n\n## Database\n\n- [ ] **PostgreSQL Database URL**\n  - Recommended: Keep using Neon (free tier) or Supabase\n  - Format: postgresql://user:password@host:port/database\n  - Or self-host PostgreSQL on your server\n\n## Testing\n\nAfter deployment, test:\n- [ ] Voice conversation works\n- [ ] Map loads correctly  \n- [ ] Location search works\n- [ ] Directions work\n- [ ] Transportation pricing shows\n","size_bytes":944},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n","size_bytes":584},"client/src/components/examples/MicrophoneButton.tsx":{"content":"import MicrophoneButton from '../MicrophoneButton';\n\nexport default function MicrophoneButtonExample() {\n  return (\n    <div className=\"h-screen bg-background relative\">\n      <MicrophoneButton \n        onRecordingStart={() => {\n          console.log('Recording started');\n        }}\n        onRecordingStop={(transcript) => {\n          console.log('Recording stopped. Transcript:', transcript);\n        }}\n      />\n    </div>\n  );\n}\n","size_bytes":434},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/JourneyProgressCard.tsx":{"content":"import { Train, Bus, Car, MapPin, Footprints, ChevronRight } from \"lucide-react\";\n\ninterface JourneyStage {\n  stage: string;\n  mode: 'walk' | 'metro' | 'uber' | 'bus' | 'train';\n  provider?: string;\n  fare: number;\n  duration?: number;\n  description: string;\n}\n\ninterface TransportJourney {\n  journeyName: string;\n  totalFare: number;\n  totalDuration?: number;\n  stages: JourneyStage[];\n  recommendation?: string;\n}\n\ninterface JourneyProgressCardProps {\n  journeys: TransportJourney[];\n  origin?: string;\n  destination?: string;\n}\n\nexport function JourneyProgressCard({ journeys, origin, destination }: JourneyProgressCardProps) {\n  const getIcon = (mode: string) => {\n    switch (mode) {\n      case 'metro':\n        return <Train className=\"w-6 h-6\" />;\n      case 'bus':\n        return <Bus className=\"w-6 h-6\" />;\n      case 'uber':\n        return <Car className=\"w-6 h-6\" />;\n      case 'walk':\n        return <Footprints className=\"w-6 h-6\" />;\n      case 'train':\n        return <Train className=\"w-6 h-6\" />;\n      default:\n        return <MapPin className=\"w-6 h-6\" />;\n    }\n  };\n\n  const getModeColor = (mode: string): { bg: string; border: string; text: string } => {\n    switch (mode) {\n      case 'metro':\n        return { bg: 'bg-purple-500/20', border: 'border-purple-500/50', text: 'text-purple-300' };\n      case 'bus':\n        return { bg: 'bg-green-500/20', border: 'border-green-500/50', text: 'text-green-300' };\n      case 'uber':\n        return { bg: 'bg-cyan-500/20', border: 'border-cyan-500/50', text: 'text-cyan-300' };\n      case 'walk':\n        return { bg: 'bg-gray-500/20', border: 'border-gray-500/50', text: 'text-gray-300' };\n      case 'train':\n        return { bg: 'bg-blue-500/20', border: 'border-blue-500/50', text: 'text-blue-300' };\n      default:\n        return { bg: 'bg-gray-500/20', border: 'border-gray-500/50', text: 'text-gray-300' };\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\" data-testid=\"card-journey-progress\">\n      {/* Route Header */}\n      {(origin || destination) && (\n        <div className=\"flex items-center gap-2 text-xs text-gray-400\">\n          <MapPin className=\"w-3.5 h-3.5 text-cyan-400\" />\n          <span className=\"font-medium\">{origin || 'Origin'}</span>\n          <span>→</span>\n          <MapPin className=\"w-3.5 h-3.5 text-cyan-400\" />\n          <span className=\"font-medium\">{destination || 'Destination'}</span>\n        </div>\n      )}\n\n      {/* Journey Options - Horizontal Block Layout */}\n      <div className=\"space-y-4\">\n        {journeys.map((journey, journeyIndex) => (\n          <div\n            key={journeyIndex}\n            className=\"bg-gray-900/60 border border-gray-700/50 rounded-lg p-5 hover-elevate transition-all\"\n            data-testid={`card-journey-${journeyIndex}`}\n          >\n            {/* Journey Header */}\n            <div className=\"flex items-center justify-between mb-5\">\n              <div>\n                <h4 className=\"font-semibold text-white text-base\">{journey.journeyName}</h4>\n                {journey.recommendation && (\n                  <p className=\"text-xs text-gray-400 mt-1\">{journey.recommendation}</p>\n                )}\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-cyan-400 font-bold text-xl\">₹{journey.totalFare}</div>\n                {journey.totalDuration && (\n                  <div className=\"text-xs text-gray-500\">~{journey.totalDuration} mins</div>\n                )}\n              </div>\n            </div>\n\n            {/* Horizontal Block Timeline */}\n            <div className=\"overflow-x-auto pb-2\">\n              <div className=\"flex items-center gap-0 min-w-max\">\n                {journey.stages.map((stage, stageIndex) => {\n                  const isLast = stageIndex === journey.stages.length - 1;\n                  const colors = getModeColor(stage.mode);\n                  \n                  return (\n                    <div key={stageIndex} className=\"flex items-center\">\n                      {/* Stage Block */}\n                      <div className=\"flex flex-col items-center\">\n                        {/* Icon Block */}\n                        <div \n                          className={`w-16 h-16 rounded-xl border-2 flex items-center justify-center ${colors.bg} ${colors.border} ${colors.text} transition-all hover:scale-105`}\n                        >\n                          {getIcon(stage.mode)}\n                        </div>\n                        \n                        {/* Stage Details */}\n                        <div className=\"mt-3 text-center min-w-[140px] max-w-[140px]\">\n                          <div className=\"font-semibold text-white text-sm mb-1\">\n                            {stage.stage}\n                          </div>\n                          {stage.provider && (\n                            <div className=\"text-[10px] text-gray-400 mb-1\">\n                              {stage.provider}\n                            </div>\n                          )}\n                          <div className={`font-bold text-sm ${colors.text}`}>\n                            {stage.fare > 0 ? `₹${stage.fare}` : 'Free'}\n                          </div>\n                          {stage.duration && (\n                            <div className=\"text-[10px] text-gray-500 mt-0.5\">\n                              ~{stage.duration} min\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                      \n                      {/* Arrow Connector */}\n                      {!isLast && (\n                        <div className=\"flex items-center mx-3 mb-16\">\n                          <ChevronRight className=\"w-6 h-6 text-gray-600\" />\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":5975},"replit.md":{"content":"# Voice & Map Input Application\n\n## Overview\nThis project is a real-time, voice-enabled map application featuring \"Aroha,\" an AI travel companion. It offers natural, continuous voice conversations for travel, locations, and directions using OpenAI's Realtime API with WebRTC. The application prioritizes a conversation-first experience with a dynamic UI where the map appears only when needed. Key capabilities include voice-activated directions, real-time map updates, multi-stage transportation journey progressions (e.g., Walk → Metro → Walk) with cost breakdowns, and discovery of nearby places. The core ambition is to provide a seamless, low-latency, and intuitive voice interaction experience for travel planning.\n\n## User Preferences\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend\n- **Framework**: React with TypeScript (Vite build tool).\n- **UI/UX**: Shadcn UI (New York style, built on Radix UI) with a minimalist, Material Design-inspired approach.\n- **Styling**: Tailwind CSS with custom design tokens (spacing, colors, typography using Inter font).\n- **State Management**: TanStack Query for server state; React hooks for local state.\n- **Routing**: Wouter for client-side routing.\n- **Interactive UI Layout**:\n    - **Conversation-First Design**: Map panel is initially hidden, dynamically appearing when AI calls location-related functions (e.g., `search_location`, `get_directions`).\n    - **Dynamic Map Appearance**: Map slides in from the right when needed, splitting the screen 50/50 with the conversation panel.\n    - **Split-Screen Journey Display**: When transportation options are provided, the conversation panel splits into a scrollable conversation (60%) and a dedicated area for visual journey cards (40%).\n    - **Visual Journey Blocks**: Transportation options are displayed as horizontal, color-coded blocks (e.g., Purple for Metro, Green for Bus) with icons, stage details, and total fare/duration, supporting horizontal scrolling for long journeys.\n\n### Backend\n- **Runtime**: Node.js with Express.js (TypeScript, ES modules).\n- **API Pattern**: RESTful endpoints (JSON format).\n- **Transportation Journey System**: Generates multi-stage journey progressions (e.g., Metro + Walk, Direct Bus, Ride-hailing) with detailed fare calculations for Bengaluru (Metro, BMTC Bus, Uber/Ola). Journeys are sorted by total fare (cheapest first) and include personalized recommendations.\n- **Real-time Voice Conversation Flow**:\n    - Uses OpenAI Realtime API via WebRTC for low-latency bidirectional audio streaming and server-side Voice Activity Detection (VAD).\n    - **AI Function Calling**: Configured with tools for map interaction (`search_location`, `center_map`, `add_marker`, `get_directions`, `compare_transportation`, `find_nearby_places`).\n    - **AI Personality (Aroha)**: A friendly, warm, and concise travel companion (1-2 sentence responses max). Aroha acts immediately using tools, elaborating only when asked. She is aware of the visual journey blocks and references them concisely.\n\n### Map Integration\n- **Provider**: Google Maps JavaScript API (with Places library, Geocoding API, Directions API).\n- **Readiness System**: Robust initialization handling ensures map readiness before operations, with error handling and toast notifications.\n- **Imperative API**: MapContainer exposes methods (`searchLocation`, `centerMap`, `addMarker`, `drawRoute`, `showPlaces`, `clearPlaces`) for AI programmatic control.\n- **Marker Management**: Automatic clearing of previous single markers; `showPlaces` for multiple POI markers with info windows; `clearPlaces` for stale results.\n- **Route Visualization**: Directions drawn as cyan polylines with automatic viewport adjustment.\n\n### Data Layer\n- **ORM**: Drizzle ORM for PostgreSQL.\n- **Database**: Neon serverless PostgreSQL.\n- **Schema**: Centralized, type-safe schema (e.g., `Users` table).\n- **Migrations**: Drizzle Kit.\n\n### Project Structure\n- **Monorepo**: Client and server directories, with shared types.\n- **Build**: Client to `dist/public`, server to `dist` (esbuild).\n\n## External Dependencies\n\n### Third-Party APIs\n- **OpenAI API**: Realtime API (`gpt-4o-realtime-preview-2024-12-17`) for voice conversations (WebRTC, VAD, transcription). Requires `OPENAI_API_KEY`.\n- **Google Maps API**: JavaScript Maps API, Places library. Requires `VITE_GOOGLE_MAPS_API_KEY`.\n\n### Database\n- **Neon Serverless PostgreSQL**: Cloud-hosted PostgreSQL. Requires `DATABASE_URL`.\n\n### Core Libraries\n- **UI & Styling**: Radix UI, Tailwind CSS, `class-variance-authority`, Lucide React.\n- **Form Handling**: React Hook Form, Zod, `@hookform/resolvers`.\n- **Data Fetching**: TanStack Query.","size_bytes":4713},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\n// Trust proxy (required for proper IP detection behind load balancers and Replit infrastructure)\n// Replit always runs behind a proxy, so we need this in all environments\napp.set('trust proxy', 1);\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\n\n// Security: Add security headers to all responses\napp.use((req, res, next) => {\n  // Prevent clickjacking attacks\n  res.setHeader('X-Frame-Options', 'DENY');\n  \n  // Prevent MIME type sniffing\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n  \n  // Enable XSS protection in older browsers\n  res.setHeader('X-XSS-Protection', '1; mode=block');\n  \n  // Enforce HTTPS in production (when behind a proxy)\n  if (app.get('env') === 'production') {\n    res.setHeader('Strict-Transport-Security', 'max-age=31536000; includeSubDomains');\n  }\n  \n  // Control which features and APIs can be used\n  res.setHeader('Permissions-Policy', 'microphone=*, camera=(), geolocation=()');\n  \n  next();\n});\n\n// Security: CORS protection - only allow same origin by default\n// This prevents unauthorized external sites from making requests to your API\napp.use((req, res, next) => {\n  const origin = req.get('origin');\n  const host = req.get('host');\n  \n  // Validate origin matches host exactly (prevent subdomain/superdomain attacks)\n  let isAllowedOrigin = false;\n  \n  if (origin && host) {\n    try {\n      const originUrl = new URL(origin);\n      const expectedHost = host.split(':')[0]; // Remove port if present\n      const originHost = originUrl.hostname;\n      \n      // Exact match: origin hostname must exactly match the host\n      // This prevents attacks like origin='evil.com.attacker.net' when host='evil.com'\n      if (originHost === expectedHost) {\n        isAllowedOrigin = true;\n      }\n    } catch (error) {\n      // Invalid origin URL - reject\n      console.warn(`[Security] Invalid origin URL: ${origin}`);\n      isAllowedOrigin = false;\n    }\n  }\n  \n  // Set CORS headers only for allowed origins\n  if (isAllowedOrigin) {\n    res.setHeader('Access-Control-Allow-Origin', origin!);\n    res.setHeader('Access-Control-Allow-Credentials', 'true');\n  }\n  \n  // Handle preflight requests\n  if (req.method === 'OPTIONS') {\n    if (isAllowedOrigin) {\n      res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n      res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n      res.setHeader('Access-Control-Max-Age', '86400'); // 24 hours\n      return res.sendStatus(204);\n    } else {\n      // Reject preflight from unauthorized origins\n      return res.sendStatus(403);\n    }\n  }\n  \n  next();\n});\n\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":4759},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"AZURE_PERSONALIZED_GUIDE.md":{"content":"# Deploy to YOUR Azure VM - Personalized Guide\n\n**Your Azure VM Details:**\n- **Public IP**: 40.81.228.90\n- **VM Size**: Standard B4as v2 (4 vcpus, 16 GiB memory) 💪\n- **Ports**: HTTP (80) ✓ Open\n\n---\n\n## 🚀 Quick Deployment (15 minutes)\n\n### Step 1: Download Project from Replit\n\n1. In Replit, click three dots (⋮) in file explorer\n2. Select \"Download as zip\"\n3. Save and extract to your computer\n\n### Step 2: Connect to Your Azure VM\n\n```bash\nssh azureuser@40.81.228.90\n```\n\n### Step 3: Install Required Software (One-Time Setup)\n\nCopy and paste this entire block:\n\n```bash\n# Update system\nsudo apt update && sudo apt upgrade -y\n\n# Install Node.js 20\ncurl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -\nsudo apt install -y nodejs\n\n# Install PM2 and Nginx\nsudo npm install -g pm2\nsudo apt install -y nginx\n\n# Verify installations\nnode --version   # Should show v20.x\npm2 --version    # Should show latest\nnginx -v         # Should show version\n\n# Create app directory\nsudo mkdir -p /var/www/aroha-app\nsudo chown -R $USER:$USER /var/www/aroha-app\n\necho \"✅ Software installation complete!\"\n```\n\n### Step 4: Upload Your Project Files\n\n**Open a NEW terminal on your LOCAL computer** (not SSH):\n\n```bash\n# Navigate to where you extracted the Replit download\ncd /path/to/your/extracted/project\n\n# Upload everything to Azure\nscp -r * azureuser@40.81.228.90:/var/www/aroha-app/\n```\n\nThis will take 1-2 minutes depending on your internet speed.\n\n### Step 5: Configure Environment Variables\n\n**Back in your SSH session (Azure VM):**\n\n```bash\ncd /var/www/aroha-app\n\n# Create .env file\nnano .env\n```\n\n**Copy and paste this, then update YOUR actual values:**\n\n```env\nDATABASE_URL=postgresql://user:password@host/database\nOPENAI_API_KEY=sk-proj-YOUR_KEY_HERE\nVITE_GOOGLE_MAPS_API_KEY=YOUR_GOOGLE_MAPS_KEY_HERE\nNODE_ENV=production\nPORT=5000\n```\n\n**Get your actual values from:** `backup_20251108_110344/env_variables.txt`\n\n**Save the file:**\n- `Ctrl + O` (save)\n- `Enter` (confirm)\n- `Ctrl + X` (exit)\n\n### Step 6: Install, Build & Deploy\n\n```bash\ncd /var/www/aroha-app\n\n# Install dependencies (2-3 minutes)\nnpm install\n\n# Build the application (1 minute)\nnpm run build\n\n# Push database schema\nnpx drizzle-kit push:pg\n\n# Start with PM2\npm2 start npm --name aroha-app -- run dev\n\n# Save PM2 config\npm2 save\n\n# Enable auto-start on reboot\npm2 startup\n\n# ⚠️ IMPORTANT: Copy and run the command that pm2 startup shows you\n```\n\n### Step 7: Configure Nginx\n\n```bash\n# Create Nginx configuration\nsudo nano /etc/nginx/sites-available/aroha-app\n```\n\n**Paste this configuration:**\n\n```nginx\nserver {\n    listen 80;\n    server_name 40.81.228.90;\n\n    location / {\n        proxy_pass http://localhost:5000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebRTC support\n        proxy_read_timeout 300s;\n        proxy_connect_timeout 75s;\n    }\n}\n```\n\n**Save and activate:**\n\n```bash\n# Enable the site\nsudo ln -s /etc/nginx/sites-available/aroha-app /etc/nginx/sites-enabled/\n\n# Remove default site\nsudo rm /etc/nginx/sites-enabled/default\n\n# Test configuration\nsudo nginx -t\n\n# Should see: \"test is successful\"\n\n# Restart Nginx\nsudo systemctl restart nginx\n\n# Verify it's running\nsudo systemctl status nginx\n```\n\n### Step 8: Verify Ports in Azure Portal\n\nGo to Azure Portal → Your VM → Networking → Check these ports are open:\n\n- ✅ Port 22 (SSH)\n- ✅ Port 80 (HTTP) - You said this is open!\n- ⚠️ Port 443 (HTTPS) - Open this for future SSL\n\n### Step 9: Test Your App! 🎉\n\nOpen your browser:\n\n```\nhttp://40.81.228.90\n```\n\nYou should see your Aroha app!\n\n---\n\n## ✅ Verification Checklist\n\nTest these features:\n- [ ] App loads in browser\n- [ ] Click microphone - voice conversation starts\n- [ ] Hear Aroha speaking\n- [ ] Ask about a location - map appears\n- [ ] Search location works\n- [ ] Get directions works\n- [ ] Transportation pricing shows\n\n---\n\n## 🛠️ Daily Management Commands\n\n```bash\n# View app logs\npm2 logs aroha-app\n\n# View last 50 lines\npm2 logs aroha-app --lines 50\n\n# Restart app\npm2 restart aroha-app\n\n# Check status\npm2 status\n\n# Monitor in real-time\npm2 monit\n\n# Stop app\npm2 stop aroha-app\n\n# Start app\npm2 start aroha-app\n\n# Nginx logs\nsudo tail -f /var/log/nginx/error.log\nsudo tail -f /var/log/nginx/access.log\n```\n\n---\n\n## 🔄 How to Update Your App Later\n\nWhen you make changes in Replit:\n\n**1. Download new version from Replit**\n\n**2. Upload to Azure (from local computer):**\n```bash\ncd /path/to/new/version\nscp -r * azureuser@40.81.228.90:/var/www/aroha-app/\n```\n\n**3. Rebuild and restart (on Azure VM):**\n```bash\nssh azureuser@40.81.228.90\ncd /var/www/aroha-app\nnpm install\nnpm run build\npm2 restart aroha-app\npm2 logs aroha-app --lines 30\n```\n\n---\n\n## 🐛 Troubleshooting\n\n### App not loading in browser?\n\n```bash\n# Check if app is running\npm2 status\n\n# Should show: aroha-app | online\n\n# Check app logs\npm2 logs aroha-app --lines 100\n\n# Restart if needed\npm2 restart aroha-app\n```\n\n### Nginx not working?\n\n```bash\n# Test Nginx config\nsudo nginx -t\n\n# Check Nginx status\nsudo systemctl status nginx\n\n# Restart Nginx\nsudo systemctl restart nginx\n\n# Check error logs\nsudo tail -f /var/log/nginx/error.log\n```\n\n### Voice/WebRTC not working?\n\n**Problem**: Browsers require HTTPS for microphone access in production\n\n**Solution**: You need a domain name and SSL certificate\n\n1. Get a domain (e.g., from Namecheap, GoDaddy)\n2. Point domain to 40.81.228.90\n3. Install SSL certificate:\n\n```bash\nsudo apt install -y certbot python3-certbot-nginx\nsudo certbot --nginx -d yourdomain.com\n```\n\n**Temporary workaround**: Test with `http://localhost:5000` through SSH tunnel:\n```bash\n# On your local computer\nssh -L 5000:localhost:5000 azureuser@40.81.228.90\n# Then access http://localhost:5000 in your browser\n```\n\n### Database connection error?\n\n```bash\n# Verify .env file\ncat .env | grep DATABASE_URL\n\n# Test connection\npsql \"$DATABASE_URL\"\n\n# Re-push schema\nnpx drizzle-kit push:pg\n```\n\n---\n\n## 💰 Cost Estimate\n\n**Your VM (Standard B4as v2)**: ~$125-140/month\n- This is quite powerful! You could:\n  - Run multiple apps on it\n  - Or downgrade to B1s ($7-10/month) if only running this one app\n\n**Other Costs**:\n- Database (Neon free tier): $0\n- Bandwidth: Included in VM price\n- **Total**: ~$125-140/month (or $7-10 with B1s)\n\n**API Usage** (pay per use):\n- OpenAI Realtime API: ~$0.06/minute\n- Google Maps: Free up to 28,000 loads/month\n\n---\n\n## 🎯 Optional: Add HTTPS (When You Get a Domain)\n\n```bash\n# Install Certbot\nsudo apt install -y certbot python3-certbot-nginx\n\n# Get SSL certificate (replace yourdomain.com)\nsudo certbot --nginx -d yourdomain.com\n\n# Certbot will:\n# 1. Verify you own the domain\n# 2. Get SSL certificate from Let's Encrypt (free)\n# 3. Update Nginx config automatically\n# 4. Setup auto-renewal\n\n# Test auto-renewal\nsudo certbot renew --dry-run\n```\n\nThen update Nginx config:\n```bash\nsudo nano /etc/nginx/sites-available/aroha-app\n# Change: server_name 40.81.228.90;\n# To: server_name yourdomain.com;\n\nsudo nginx -t\nsudo systemctl restart nginx\n```\n\n---\n\n## 📊 Your VM Resources\n\nWith 16GB RAM and 4 vCPUs, you have plenty of power!\n\n**Current usage:**\n```bash\n# Check memory\nfree -h\n\n# Check CPU\nhtop\n\n# Check disk space\ndf -h\n\n# Check processes\npm2 monit\n```\n\nYou could easily run 5-10 Node.js apps on this VM!\n\n---\n\n## 🎉 You're All Set!\n\nYour app should be running at:\n```\nhttp://40.81.228.90\n```\n\n**Next Steps:**\n1. Test all features\n2. Consider getting a domain for HTTPS\n3. Setup Azure Backup\n4. Monitor with `pm2 monit`\n\nNeed help? Check the logs:\n```bash\npm2 logs aroha-app\n```\n\nEnjoy your self-hosted Aroha app! 🚀\n","size_bytes":7946},"BACKUP_AND_SELFHOST_GUIDE.md":{"content":"# Backup & Self-Hosting Guide\n\n## Project Backup Instructions\n\n### 1. Export Project Files from Replit\n\n**Option A: Export as ZIP (Recommended)**\n1. Click on the three dots menu (⋮) in the file explorer\n2. Select \"Download as zip\"\n3. Save the zip file to your local machine\n\n**Option B: Clone via Git**\n```bash\n# If you have Git integration enabled, clone the repository\ngit clone <your-replit-git-url>\n```\n\n### 2. Export Database Data\n\nYour database is hosted on Neon PostgreSQL. To backup your data:\n\n```bash\n# From Replit shell, export the database schema and data\nnpx drizzle-kit push:pg\n\n# Export database to SQL file (if you have pg_dump available)\n# Or use Neon's dashboard to create a backup\n```\n\n**Alternative: Use Neon Dashboard**\n1. Go to your Neon console: https://console.neon.tech\n2. Find your database project\n3. Use the \"Branches\" feature to create a snapshot\n4. Or export data using their SQL editor\n\n### 3. Document Environment Variables\n\nYou need these environment variables for self-hosting:\n\n```env\n# Database Connection\nDATABASE_URL=postgresql://user:password@host:port/database\n\n# OpenAI API Key\nOPENAI_API_KEY=sk-proj-...\n\n# Google Maps API Key (must be prefixed with VITE_ for frontend)\nVITE_GOOGLE_MAPS_API_KEY=...\n\n# Node Environment\nNODE_ENV=production\n```\n\n### 4. Save Configuration Files\n\nEnsure you have these files backed up:\n- `package.json` - All dependencies\n- `drizzle.config.ts` - Database configuration\n- `vite.config.ts` - Build configuration\n- `tsconfig.json` - TypeScript configuration\n- All files in `shared/`, `server/`, and `client/` directories\n\n---\n\n## Self-Hosting Guide\n\n### Prerequisites\n\n1. **Server Requirements**\n   - Ubuntu 20.04+ or similar Linux distribution\n   - 1GB+ RAM minimum (2GB recommended)\n   - Node.js 20.x\n   - PostgreSQL database (can use Neon, Supabase, or self-hosted)\n\n2. **Domain & SSL (Optional but Recommended)**\n   - Domain name for your application\n   - SSL certificate (Let's Encrypt is free)\n\n### Step 1: Choose Your Hosting Provider\n\n**Budget-Friendly Options:**\n- **DigitalOcean Droplets**: $6/month for basic droplet\n- **Hetzner Cloud**: €4.51/month for CX11\n- **Vultr**: $6/month for 1GB RAM instance\n- **Linode**: $5/month for Nanode\n- **Oracle Cloud**: Free tier available (always free for limited resources)\n- **AWS Lightsail**: $3.50/month for smallest instance\n- **Google Cloud**: Free tier available\n\n**Database Hosting:**\n- Keep using Neon PostgreSQL (has free tier)\n- Or use Supabase PostgreSQL (free tier)\n- Or self-host PostgreSQL on same server\n\n### Step 2: Server Setup\n\n```bash\n# SSH into your server\nssh root@your-server-ip\n\n# Update system packages\nsudo apt update && sudo apt upgrade -y\n\n# Install Node.js 20.x\ncurl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -\nsudo apt install -y nodejs\n\n# Install PM2 for process management\nsudo npm install -g pm2\n\n# Install Nginx (for reverse proxy)\nsudo apt install -y nginx\n\n# Install Git\nsudo apt install -y git\n```\n\n### Step 3: Deploy Your Application\n\n```bash\n# Create application directory\nmkdir -p /var/www/aroha-map-app\ncd /var/www/aroha-map-app\n\n# Upload your project files\n# Option 1: Use SCP from your local machine\n# scp -r /path/to/project/* root@your-server-ip:/var/www/aroha-map-app/\n\n# Option 2: Use Git\n# git clone <your-repository-url> .\n\n# Install dependencies\nnpm install\n\n# Build the application\nnpm run build\n```\n\n### Step 4: Configure Environment Variables\n\n```bash\n# Create .env file\nnano .env\n\n# Add your environment variables:\nDATABASE_URL=postgresql://user:password@host:port/database\nOPENAI_API_KEY=sk-proj-...\nVITE_GOOGLE_MAPS_API_KEY=...\nNODE_ENV=production\nPORT=5000\n```\n\n### Step 5: Database Setup\n\n```bash\n# Push database schema to your production database\nnpx drizzle-kit push:pg\n\n# If migrating data from Neon, import your SQL backup\n# psql $DATABASE_URL < backup.sql\n```\n\n### Step 6: Start Application with PM2\n\n```bash\n# Start the application\npm2 start npm --name \"aroha-app\" -- start\n\n# Or if you need to run the dev command\npm2 start \"npm run dev\" --name \"aroha-app\"\n\n# Save PM2 configuration\npm2 save\n\n# Setup PM2 to start on server reboot\npm2 startup\n# Follow the instructions printed by the command above\n```\n\n### Step 7: Configure Nginx Reverse Proxy\n\n```bash\n# Create Nginx configuration\nsudo nano /etc/nginx/sites-available/aroha-app\n\n# Add this configuration:\n```\n\n```nginx\nserver {\n    listen 80;\n    server_name your-domain.com;  # Replace with your domain or server IP\n\n    location / {\n        proxy_pass http://localhost:5000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebRTC support\n        proxy_read_timeout 300s;\n        proxy_connect_timeout 75s;\n    }\n}\n```\n\n```bash\n# Enable the site\nsudo ln -s /etc/nginx/sites-available/aroha-app /etc/nginx/sites-enabled/\n\n# Test Nginx configuration\nsudo nginx -t\n\n# Restart Nginx\nsudo systemctl restart nginx\n```\n\n### Step 8: Setup SSL with Let's Encrypt (Optional)\n\n```bash\n# Install Certbot\nsudo apt install -y certbot python3-certbot-nginx\n\n# Get SSL certificate\nsudo certbot --nginx -d your-domain.com\n\n# Certbot will automatically configure Nginx for HTTPS\n```\n\n### Step 9: Firewall Configuration\n\n```bash\n# Allow HTTP and HTTPS\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# Allow SSH (important!)\nsudo ufw allow 22/tcp\n\n# Enable firewall\nsudo ufw enable\n```\n\n### Step 10: Monitoring & Maintenance\n\n```bash\n# View application logs\npm2 logs aroha-app\n\n# Monitor application status\npm2 monit\n\n# Restart application\npm2 restart aroha-app\n\n# Stop application\npm2 stop aroha-app\n\n# View Nginx logs\nsudo tail -f /var/log/nginx/error.log\nsudo tail -f /var/log/nginx/access.log\n```\n\n---\n\n## Cost Comparison\n\n### Current Setup (Replit)\n- Unknown cost (you mentioned it's getting expensive)\n\n### Self-Hosted Setup (Estimated Monthly)\n- **VPS Server**: $3.50 - $12/month (depending on provider)\n- **Database (Neon free tier)**: $0\n- **Domain name**: ~$12/year ($1/month)\n- **SSL Certificate (Let's Encrypt)**: $0\n- **Total**: ~$4.50 - $13/month\n\n### API Costs (Ongoing)\n- **OpenAI Realtime API**: Pay-per-use (based on audio minutes)\n- **Google Maps API**: Free tier available (28,000 map loads/month free)\n\n---\n\n## Deployment Checklist\n\n- [ ] Export project files from Replit\n- [ ] Backup database from Neon\n- [ ] Save all environment variables\n- [ ] Choose hosting provider and create server\n- [ ] Setup Node.js and PM2\n- [ ] Upload project files\n- [ ] Install dependencies and build\n- [ ] Configure environment variables\n- [ ] Setup database connection\n- [ ] Start application with PM2\n- [ ] Configure Nginx reverse proxy\n- [ ] Setup SSL certificate (optional)\n- [ ] Configure firewall\n- [ ] Test application thoroughly\n- [ ] Setup monitoring and backups\n\n---\n\n## Updating Your Application\n\n```bash\n# SSH into server\nssh root@your-server-ip\n\n# Navigate to application directory\ncd /var/www/aroha-map-app\n\n# Pull latest changes (if using Git)\ngit pull origin main\n\n# Or upload new files via SCP\n# scp -r /path/to/updated/files/* root@your-server-ip:/var/www/aroha-map-app/\n\n# Install new dependencies\nnpm install\n\n# Rebuild application\nnpm run build\n\n# Restart application\npm2 restart aroha-app\n```\n\n---\n\n## Troubleshooting\n\n### Application won't start\n```bash\n# Check PM2 logs\npm2 logs aroha-app --lines 100\n\n# Check if port 5000 is in use\nsudo lsof -i :5000\n\n# Verify environment variables\npm2 env 0\n```\n\n### Can't connect to database\n```bash\n# Test database connection\npsql $DATABASE_URL\n\n# Check Neon dashboard for database status\n# Verify DATABASE_URL is correct\n```\n\n### Nginx errors\n```bash\n# Check Nginx error logs\nsudo tail -f /var/log/nginx/error.log\n\n# Verify Nginx configuration\nsudo nginx -t\n\n# Restart Nginx\nsudo systemctl restart nginx\n```\n\n### WebRTC/Voice not working\n- Ensure your domain has HTTPS (required for WebRTC)\n- Check browser console for errors\n- Verify OPENAI_API_KEY is valid\n- Check that proxy settings allow WebSocket connections\n\n---\n\n## Need Help?\n\n- **DigitalOcean Tutorials**: https://www.digitalocean.com/community/tutorials\n- **PM2 Documentation**: https://pm2.keymetrics.io/docs/usage/quick-start/\n- **Nginx Documentation**: https://nginx.org/en/docs/\n- **Let's Encrypt**: https://letsencrypt.org/getting-started/\n","size_bytes":8553},"backup_20251108_110344/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n","size_bytes":584},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"server/transportation.ts":{"content":"interface Location {\n  latitude: number;\n  longitude: number;\n}\n\ninterface JourneyStage {\n  stage: string; // e.g., \"Walk to Metro\", \"Metro Ride\", \"Uber Ride\"\n  mode: 'walk' | 'metro' | 'uber' | 'bus' | 'train';\n  provider?: string;\n  fare: number;\n  duration?: number; // in minutes\n  description: string;\n}\n\ninterface TransportJourney {\n  journeyName: string; // e.g., \"Metro + Walk\", \"Direct Uber\"\n  totalFare: number;\n  totalDuration?: number;\n  stages: JourneyStage[];\n  recommendation?: string;\n}\n\ninterface TransportOption {\n  mode: 'metro' | 'uber' | 'bus' | 'train';\n  provider: string;\n  fare: number;\n  currency: string;\n  duration?: number;\n  distance?: number;\n  description: string;\n  details?: string;\n}\n\nexport function calculateMetroFare(distanceKm: number, smartCard: boolean = false): number {\n  let baseFare: number;\n  \n  if (distanceKm <= 2) {\n    baseFare = 10;\n  } else if (distanceKm <= 4) {\n    baseFare = 15;\n  } else if (distanceKm <= 6) {\n    baseFare = 20;\n  } else if (distanceKm <= 10) {\n    baseFare = 25;\n  } else if (distanceKm <= 15) {\n    baseFare = 30;\n  } else if (distanceKm <= 25) {\n    baseFare = 40;\n  } else {\n    baseFare = 50;\n  }\n  \n  if (smartCard) {\n    return Math.round(baseFare * 0.95 * 100) / 100;\n  }\n  \n  return baseFare;\n}\n\nexport function calculateBusFare(distanceKm: number, serviceType: 'ordinary' | 'vajra' = 'ordinary'): number {\n  if (serviceType === 'ordinary') {\n    if (distanceKm <= 5) return 10;\n    if (distanceKm <= 10) return 15;\n    if (distanceKm <= 20) return 20;\n    return 25;\n  } else {\n    if (distanceKm <= 10) return 30;\n    if (distanceKm <= 20) return 50;\n    return 70;\n  }\n}\n\nexport function calculateTrainFare(distanceKm: number, classType: 'sleeper' | '3ac' | '2ac' = 'sleeper'): number {\n  const baseRate = classType === 'sleeper' ? 0.5 : classType === '3ac' ? 1.2 : 2.0;\n  const baseFare = distanceKm * baseRate;\n  const reservationCharge = classType === 'sleeper' ? 20 : classType === '3ac' ? 40 : 50;\n  \n  return Math.round((baseFare + reservationCharge) * 1.05);\n}\n\nexport function calculateRideShareFare(\n  distanceKm: number,\n  estimatedMinutes: number,\n  serviceType: 'ubergo' | 'ola' | 'rapido' = 'ubergo'\n): { fare: number; productName: string } {\n  // Typical Bengaluru rates (2024)\n  const rates = {\n    ubergo: { base: 55, perKm: 12, perMin: 1.5, name: 'UberGo' },\n    ola: { base: 50, perKm: 10, perMin: 1, name: 'Ola Mini' },\n    rapido: { base: 46, perKm: 15, perMin: 0, name: 'Rapido Auto' },\n  };\n  \n  const rate = rates[serviceType];\n  const distanceFare = distanceKm * rate.perKm;\n  const timeFare = estimatedMinutes * rate.perMin;\n  const subtotal = rate.base + distanceFare + timeFare;\n  const tax = subtotal * 0.05; // 5% GST\n  \n  return {\n    fare: Math.round(subtotal + tax),\n    productName: rate.name,\n  };\n}\n\nexport async function compareTransportation(\n  fromLat: number,\n  fromLng: number,\n  toLat: number,\n  toLng: number,\n  distanceKm: number\n): Promise<TransportOption[]> {\n  const options: TransportOption[] = [];\n  const estimatedMinutes = Math.round(distanceKm * 3); // Rough estimate: ~20 km/h average in city\n  \n  const metroFare = calculateMetroFare(distanceKm);\n  options.push({\n    mode: 'metro',\n    provider: 'Namma Metro (BMRCL)',\n    fare: metroFare,\n    currency: 'INR',\n    description: `Metro ticket based on ${distanceKm.toFixed(1)}km distance`,\n    details: 'Smart card gives 5% discount. Check station connectivity for your route.',\n  });\n  \n  const ordinaryBusFare = calculateBusFare(distanceKm, 'ordinary');\n  options.push({\n    mode: 'bus',\n    provider: 'BMTC Ordinary Bus',\n    fare: ordinaryBusFare,\n    currency: 'INR',\n    description: `Regular AC/Non-AC bus fare for ${distanceKm.toFixed(1)}km`,\n    details: 'Multiple routes available. Check Namma BMTC app for real-time tracking.',\n  });\n  \n  const vajraBusFare = calculateBusFare(distanceKm, 'vajra');\n  options.push({\n    mode: 'bus',\n    provider: 'BMTC Vajra (AC Bus)',\n    fare: vajraBusFare,\n    currency: 'INR',\n    description: `Premium AC bus service for ${distanceKm.toFixed(1)}km`,\n    details: 'More comfortable than ordinary buses with better seating.',\n  });\n  \n  const uberEstimate = calculateRideShareFare(distanceKm, estimatedMinutes, 'ubergo');\n  options.push({\n    mode: 'uber',\n    provider: uberEstimate.productName,\n    fare: uberEstimate.fare,\n    currency: 'INR',\n    duration: estimatedMinutes,\n    distance: distanceKm,\n    description: `${uberEstimate.productName} - door to door service`,\n    details: `Estimated ${estimatedMinutes} mins. Price may vary with surge pricing.`,\n  });\n  \n  const olaEstimate = calculateRideShareFare(distanceKm, estimatedMinutes, 'ola');\n  options.push({\n    mode: 'uber',\n    provider: olaEstimate.productName,\n    fare: olaEstimate.fare,\n    currency: 'INR',\n    duration: estimatedMinutes,\n    distance: distanceKm,\n    description: `${olaEstimate.productName} - affordable ride`,\n    details: `Estimated ${estimatedMinutes} mins. Price may vary with demand.`,\n  });\n  \n  if (distanceKm < 10) {\n    const rapidoEstimate = calculateRideShareFare(distanceKm, estimatedMinutes, 'rapido');\n    options.push({\n      mode: 'uber',\n      provider: rapidoEstimate.productName,\n      fare: rapidoEstimate.fare,\n      currency: 'INR',\n      duration: estimatedMinutes,\n      distance: distanceKm,\n      description: `${rapidoEstimate.productName} - quick auto ride`,\n      details: `Estimated ${estimatedMinutes} mins. Good for short trips.`,\n    });\n  }\n  \n  if (distanceKm > 30) {\n    const trainFare = calculateTrainFare(distanceKm, 'sleeper');\n    options.push({\n      mode: 'train',\n      provider: 'Indian Railways (Sleeper)',\n      fare: trainFare,\n      currency: 'INR',\n      description: `Train journey for ${distanceKm.toFixed(1)}km`,\n      details: 'Check IRCTC for actual train availability and schedules.',\n    });\n  }\n  \n  return options.sort((a, b) => a.fare - b.fare);\n}\n\nexport async function getTransportJourneys(\n  fromLat: number,\n  fromLng: number,\n  toLat: number,\n  toLng: number,\n  distanceKm: number\n): Promise<TransportJourney[]> {\n  const journeys: TransportJourney[] = [];\n  const estimatedMinutes = Math.round(distanceKm * 3); // Rough estimate: ~20 km/h average in city\n  \n  // Journey 1: Metro + Walk (if distance is suitable)\n  if (distanceKm >= 2 && distanceKm <= 30) {\n    const metroFare = calculateMetroFare(distanceKm);\n    const walkTime = 5; // Assume 5 min walk on each end\n    const metroTime = Math.round(distanceKm * 2); // Metro average ~30 km/h\n    \n    journeys.push({\n      journeyName: 'Metro + Walk',\n      totalFare: metroFare,\n      totalDuration: walkTime + metroTime + walkTime,\n      stages: [\n        {\n          stage: 'Walk to Metro',\n          mode: 'walk',\n          fare: 0,\n          duration: walkTime,\n          description: 'Walk to nearest metro station'\n        },\n        {\n          stage: 'Metro Ride',\n          mode: 'metro',\n          provider: 'Namma Metro',\n          fare: metroFare,\n          duration: metroTime,\n          description: `${distanceKm.toFixed(1)}km metro journey`\n        },\n        {\n          stage: 'Walk to Destination',\n          mode: 'walk',\n          fare: 0,\n          duration: walkTime,\n          description: 'Walk to final destination'\n        }\n      ],\n      recommendation: 'Eco-friendly and avoids traffic'\n    });\n  }\n  \n  // Journey 2: Direct Bus\n  const busFare = calculateBusFare(distanceKm, 'ordinary');\n  const busTime = Math.round(distanceKm * 4); // Bus slower in traffic\n  \n  journeys.push({\n    journeyName: 'Direct Bus',\n    totalFare: busFare,\n    totalDuration: busTime,\n    stages: [\n      {\n        stage: 'Bus Ride',\n        mode: 'bus',\n        provider: 'BMTC',\n        fare: busFare,\n        duration: busTime,\n        description: `Direct bus for ${distanceKm.toFixed(1)}km`\n      }\n    ],\n    recommendation: 'Most affordable option'\n  });\n  \n  // Journey 3: Direct Uber\n  const uberEstimate = calculateRideShareFare(distanceKm, estimatedMinutes, 'ubergo');\n  journeys.push({\n    journeyName: 'Direct Uber',\n    totalFare: uberEstimate.fare,\n    totalDuration: estimatedMinutes,\n    stages: [\n      {\n        stage: 'Uber Ride',\n        mode: 'uber',\n        provider: uberEstimate.productName,\n        fare: uberEstimate.fare,\n        duration: estimatedMinutes,\n        description: 'Door-to-door service'\n      }\n    ],\n    recommendation: 'Fastest and most convenient'\n  });\n  \n  // Journey 4: Direct Ola\n  const olaEstimate = calculateRideShareFare(distanceKm, estimatedMinutes, 'ola');\n  journeys.push({\n    journeyName: 'Direct Ola',\n    totalFare: olaEstimate.fare,\n    totalDuration: estimatedMinutes,\n    stages: [\n      {\n        stage: 'Ola Ride',\n        mode: 'uber',\n        provider: olaEstimate.productName,\n        fare: olaEstimate.fare,\n        duration: estimatedMinutes,\n        description: 'Affordable ride-sharing'\n      }\n    ],\n    recommendation: 'Good alternative to Uber'\n  });\n  \n  // Journey 5: Auto (for short trips)\n  if (distanceKm < 10) {\n    const rapidoEstimate = calculateRideShareFare(distanceKm, estimatedMinutes, 'rapido');\n    journeys.push({\n      journeyName: 'Auto Rickshaw',\n      totalFare: rapidoEstimate.fare,\n      totalDuration: estimatedMinutes,\n      stages: [\n        {\n          stage: 'Auto Ride',\n          mode: 'uber',\n          provider: rapidoEstimate.productName,\n          fare: rapidoEstimate.fare,\n          duration: estimatedMinutes,\n          description: 'Quick auto ride'\n        }\n      ],\n      recommendation: 'Best for short distances'\n    });\n  }\n  \n  return journeys.sort((a, b) => a.totalFare - b.totalFare);\n}\n","size_bytes":9667},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport multer from \"multer\";\nimport OpenAI from \"openai\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport rateLimit from \"express-rate-limit\";\nimport { compareTransportation, getTransportJourneys } from \"./transportation\";\n\n// Blueprint integration: javascript_openai\n// the newest OpenAI model is \"gpt-5\" which was released August 7, 2025. do not change this unless explicitly requested by the user\nconst openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });\n\nconst upload = multer({ dest: \"uploads/\" });\n\n// Rate limiter for session creation to prevent API abuse\n// Allows 5 session requests per 15 minutes per IP address\nconst sessionLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 5, // Limit each IP to 5 requests per windowMs\n  message: {\n    error: \"Too many session requests from this IP, please try again later.\"\n  },\n  standardHeaders: true, // Return rate limit info in the `RateLimit-*` headers\n  legacyHeaders: false, // Disable the `X-RateLimit-*` headers\n  handler: (req, res) => {\n    console.warn(`Rate limit exceeded for IP: ${req.ip} on /api/session`);\n    res.status(429).json({\n      error: \"Too many session requests. Please wait before trying again.\",\n      retryAfter: Math.ceil(15 * 60) // seconds\n    });\n  },\n});\n\n// General API rate limiter to prevent abuse across all endpoints\nconst apiLimiter = rateLimit({\n  windowMs: 1 * 60 * 1000, // 1 minute\n  max: 30, // Limit each IP to 30 requests per minute\n  message: {\n    error: \"Too many requests from this IP, please slow down.\"\n  },\n  standardHeaders: true,\n  legacyHeaders: false,\n  skip: (req) => {\n    // Skip rate limiting for non-API routes\n    return !req.path.startsWith('/api/');\n  },\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Apply general rate limiting to all API routes\n  app.use(apiLimiter);\n\n  // Create ephemeral session key for WebRTC Realtime API\n  // Protected with strict rate limiting to prevent abuse\n  app.post(\"/api/session\", sessionLimiter, async (req, res) => {\n    try {\n      // Log session creation attempts for monitoring\n      console.log(`[Security] Session creation requested from IP: ${req.ip}`);\n      \n      const response = await fetch(\"https://api.openai.com/v1/realtime/sessions\", {\n        method: \"POST\",\n        headers: {\n          \"Authorization\": `Bearer ${process.env.OPENAI_API_KEY}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          model: \"gpt-4o-realtime-preview-2024-12-17\",\n          voice: \"alloy\",\n        }),\n      });\n\n      if (!response.ok) {\n        const error = await response.text();\n        console.error(`[Security] OpenAI session creation failed for IP: ${req.ip}`, error);\n        throw new Error(`OpenAI API error: ${error}`);\n      }\n\n      const data = await response.json();\n      console.log(`[Security] Session created successfully for IP: ${req.ip}`);\n      res.json(data);\n    } catch (error) {\n      console.error(\"Session creation error:\", error);\n      const errorMessage = error instanceof Error ? error.message : \"Failed to create session\";\n      res.status(500).json({ error: errorMessage });\n    }\n  });\n\n  // Get directions between two locations using Google Directions API\n  app.post(\"/api/directions\", async (req, res) => {\n    try {\n      const { origin, destination } = req.body;\n\n      if (!origin || !destination) {\n        return res.status(400).json({\n          success: false,\n          error: \"Origin and destination are required\"\n        });\n      }\n\n      const apiKey = process.env.VITE_GOOGLE_MAPS_API_KEY;\n      if (!apiKey) {\n        return res.status(500).json({\n          success: false,\n          error: \"Google Maps API key not configured\"\n        });\n      }\n\n      // Call Google Directions API\n      const url = new URL(\"https://maps.googleapis.com/maps/api/directions/json\");\n      url.searchParams.append(\"origin\", origin);\n      url.searchParams.append(\"destination\", destination);\n      url.searchParams.append(\"key\", apiKey);\n\n      const response = await fetch(url.toString());\n      const data = await response.json();\n\n      console.log(`[Directions] Request from ${origin} to ${destination}, status: ${data.status}`);\n\n      if (data.status === \"OK\" && data.routes && data.routes.length > 0) {\n        const route = data.routes[0];\n        const leg = route.legs[0];\n\n        return res.json({\n          success: true,\n          route: {\n            polyline: route.overview_polyline.points,\n            bounds: route.bounds,\n            steps: leg.steps.map((step: any) => ({\n              instruction: step.html_instructions,\n              distance: step.distance.text,\n              duration: step.duration.text,\n            })),\n          },\n          distance: leg.distance.text,\n          duration: leg.duration.text,\n          startAddress: leg.start_address,\n          endAddress: leg.end_address,\n          startLocation: {\n            lat: leg.start_location.lat,\n            lng: leg.start_location.lng,\n          },\n          endLocation: {\n            lat: leg.end_location.lat,\n            lng: leg.end_location.lng,\n          },\n        });\n      } else if (data.status === \"ZERO_RESULTS\") {\n        return res.json({\n          success: false,\n          error: \"No route found between these locations. They may be too far apart or unreachable by road.\"\n        });\n      } else if (data.status === \"REQUEST_DENIED\") {\n        return res.json({\n          success: false,\n          error: \"Directions API is not enabled. Please enable the Directions API in Google Cloud Console.\"\n        });\n      } else if (data.status === \"OVER_QUERY_LIMIT\") {\n        return res.json({\n          success: false,\n          error: \"API quota exceeded. Please try again later.\"\n        });\n      } else {\n        return res.json({\n          success: false,\n          error: `Directions request failed: ${data.status}`\n        });\n      }\n    } catch (error) {\n      console.error(\"Directions API error:\", error);\n      return res.status(500).json({\n        success: false,\n        error: error instanceof Error ? error.message : \"Failed to get directions\"\n      });\n    }\n  });\n\n  // Compare transportation options between two locations\n  app.post(\"/api/transportation/compare\", async (req, res) => {\n    try {\n      const { fromLat, fromLng, toLat, toLng, distanceKm } = req.body;\n\n      if (fromLat === undefined || fromLat === null || \n          fromLng === undefined || fromLng === null || \n          toLat === undefined || toLat === null || \n          toLng === undefined || toLng === null || \n          distanceKm === undefined || distanceKm === null) {\n        return res.status(400).json({\n          success: false,\n          error: \"Missing required parameters: fromLat, fromLng, toLat, toLng, distanceKm\"\n        });\n      }\n\n      console.log(`[Transportation] Comparing options from (${fromLat}, ${fromLng}) to (${toLat}, ${toLng}), distance: ${distanceKm}km`);\n\n      const options = await compareTransportation(fromLat, fromLng, toLat, toLng, distanceKm);\n\n      return res.json({\n        success: true,\n        options,\n      });\n    } catch (error) {\n      console.error(\"Transportation comparison error:\", error);\n      return res.status(500).json({\n        success: false,\n        error: error instanceof Error ? error.message : \"Failed to compare transportation options\"\n      });\n    }\n  });\n\n  // Get journey progressions with stages (Amazon-style delivery tracking)\n  app.post(\"/api/transportation/journeys\", async (req, res) => {\n    try {\n      const { fromLat, fromLng, toLat, toLng, distanceKm } = req.body;\n\n      if (fromLat === undefined || fromLat === null || \n          fromLng === undefined || fromLng === null || \n          toLat === undefined || toLat === null || \n          toLng === undefined || toLng === null || \n          distanceKm === undefined || distanceKm === null) {\n        return res.status(400).json({\n          success: false,\n          error: \"Missing required parameters: fromLat, fromLng, toLat, toLng, distanceKm\"\n        });\n      }\n\n      console.log(`[Transportation] Getting journey progressions from (${fromLat}, ${fromLng}) to (${toLat}, ${toLng}), distance: ${distanceKm}km`);\n\n      const journeys = await getTransportJourneys(fromLat, fromLng, toLat, toLng, distanceKm);\n\n      return res.json({\n        success: true,\n        journeys,\n      });\n    } catch (error) {\n      console.error(\"Transportation journeys error:\", error);\n      return res.status(500).json({\n        success: false,\n        error: error instanceof Error ? error.message : \"Failed to get transportation journeys\"\n      });\n    }\n  });\n\n  // Find nearby places using Google Places API\n  app.post(\"/api/places/nearby\", async (req, res) => {\n    try {\n      const { latitude, longitude, type, radius, keyword } = req.body;\n\n      if (latitude === undefined || latitude === null || longitude === undefined || longitude === null) {\n        return res.status(400).json({\n          success: false,\n          error: \"Latitude and longitude are required\"\n        });\n      }\n\n      const apiKey = process.env.VITE_GOOGLE_MAPS_API_KEY;\n      if (!apiKey) {\n        return res.status(500).json({\n          success: false,\n          error: \"Google Maps API key not configured\"\n        });\n      }\n\n      // Build Places API Nearby Search request\n      const url = new URL(\"https://maps.googleapis.com/maps/api/place/nearbysearch/json\");\n      url.searchParams.append(\"location\", `${latitude},${longitude}`);\n      url.searchParams.append(\"radius\", radius ? String(radius) : \"1500\"); // Default 1.5km\n      if (type) {\n        url.searchParams.append(\"type\", type);\n      }\n      if (keyword) {\n        url.searchParams.append(\"keyword\", keyword);\n      }\n      url.searchParams.append(\"key\", apiKey);\n\n      console.log(`[Places] Searching nearby ${type || 'places'} at (${latitude}, ${longitude}), radius: ${radius || 1500}m`);\n\n      const response = await fetch(url.toString());\n      const data = await response.json();\n\n      if (data.status === \"OK\" && data.results && data.results.length > 0) {\n        const places = data.results.slice(0, 20).map((place: any) => ({\n          name: place.name,\n          address: place.vicinity || place.formatted_address,\n          location: {\n            lat: place.geometry.location.lat,\n            lng: place.geometry.location.lng\n          },\n          rating: place.rating,\n          userRatingsTotal: place.user_ratings_total,\n          types: place.types,\n          priceLevel: place.price_level,\n          businessStatus: place.business_status,\n          placeId: place.place_id,\n          openNow: place.opening_hours?.open_now,\n          icon: place.icon,\n          photos: place.photos ? place.photos.slice(0, 1).map((photo: any) => ({\n            reference: photo.photo_reference,\n            width: photo.width,\n            height: photo.height\n          })) : []\n        }));\n\n        console.log(`[Places] Found ${places.length} places`);\n\n        return res.json({\n          success: true,\n          places,\n          count: places.length\n        });\n      } else if (data.status === \"ZERO_RESULTS\") {\n        return res.json({\n          success: true,\n          places: [],\n          count: 0,\n          message: \"No places found in this area. Try increasing the search radius or changing the location.\"\n        });\n      } else if (data.status === \"REQUEST_DENIED\") {\n        return res.json({\n          success: false,\n          error: \"Places API is not enabled. Please enable the Places API in Google Cloud Console.\"\n        });\n      } else if (data.status === \"OVER_QUERY_LIMIT\") {\n        return res.json({\n          success: false,\n          error: \"API quota exceeded. Please try again later.\"\n        });\n      } else {\n        return res.json({\n          success: false,\n          error: `Places search failed: ${data.status}`\n        });\n      }\n    } catch (error) {\n      console.error(\"Places API error:\", error);\n      return res.status(500).json({\n        success: false,\n        error: error instanceof Error ? error.message : \"Failed to search nearby places\"\n      });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","size_bytes":12386},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/TransportationCard.tsx":{"content":"import { Bus, Train, Car, MapPin, ArrowRight, Clock, IndianRupee } from \"lucide-react\";\n\ninterface TransportOption {\n  mode: string;\n  provider: string;\n  fare: number;\n  currency: string;\n  duration?: number;\n  distance?: number;\n  description: string;\n  details: string;\n}\n\ninterface TransportationCardProps {\n  options: TransportOption[];\n  distance?: string;\n  duration?: string;\n  origin?: string;\n  destination?: string;\n}\n\nexport function TransportationCard({ options, distance, duration, origin, destination }: TransportationCardProps) {\n  const getIcon = (mode: string) => {\n    switch (mode) {\n      case 'metro':\n        return <Train className=\"w-5 h-5\" />;\n      case 'bus':\n        return <Bus className=\"w-5 h-5\" />;\n      case 'train':\n        return <Train className=\"w-5 h-5\" />;\n      case 'uber':\n        return <Car className=\"w-5 h-5\" />;\n      default:\n        return <MapPin className=\"w-5 h-5\" />;\n    }\n  };\n\n  const getModeColor = (mode: string) => {\n    switch (mode) {\n      case 'metro':\n        return 'from-purple-500/20 to-purple-600/20 border-purple-500/30';\n      case 'bus':\n        return 'from-green-500/20 to-green-600/20 border-green-500/30';\n      case 'train':\n        return 'from-blue-500/20 to-blue-600/20 border-blue-500/30';\n      case 'uber':\n        return 'from-cyan-500/20 to-cyan-600/20 border-cyan-500/30';\n      default:\n        return 'from-gray-500/20 to-gray-600/20 border-gray-500/30';\n    }\n  };\n\n  const getIconColor = (mode: string) => {\n    switch (mode) {\n      case 'metro':\n        return 'text-purple-400';\n      case 'bus':\n        return 'text-green-400';\n      case 'train':\n        return 'text-blue-400';\n      case 'uber':\n        return 'text-cyan-400';\n      default:\n        return 'text-gray-400';\n    }\n  };\n\n  return (\n    <div className=\"space-y-3\" data-testid=\"card-transportation-options\">\n      {/* Route Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n          <div className=\"flex items-center gap-1.5 text-xs text-gray-300 flex-1 min-w-0\">\n            <MapPin className=\"w-3.5 h-3.5 text-cyan-400 flex-shrink-0\" />\n            <span className=\"truncate font-medium\">{origin || 'Origin'}</span>\n          </div>\n          <ArrowRight className=\"w-3.5 h-3.5 text-gray-500 flex-shrink-0\" />\n          <div className=\"flex items-center gap-1.5 text-xs text-gray-300 flex-1 min-w-0\">\n            <MapPin className=\"w-3.5 h-3.5 text-cyan-400 flex-shrink-0\" />\n            <span className=\"truncate font-medium\">{destination || 'Destination'}</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Distance & Duration Info */}\n      {(distance || duration) && (\n        <div className=\"flex items-center gap-3 text-xs text-gray-400\">\n          {distance && (\n            <div className=\"flex items-center gap-1\">\n              <MapPin className=\"w-3 h-3\" />\n              <span>{distance}</span>\n            </div>\n          )}\n          {duration && (\n            <div className=\"flex items-center gap-1\">\n              <Clock className=\"w-3 h-3\" />\n              <span>{duration}</span>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Transportation Options - Simple Card Blocks */}\n      <div className=\"grid grid-cols-3 gap-2\">\n        {options.map((option, index) => (\n          <div\n            key={index}\n            className={`bg-gradient-to-br ${getModeColor(option.mode)} border rounded-lg p-3 hover-elevate transition-all text-center`}\n            data-testid={`card-transport-option-${index}`}\n          >\n            <div className={`${getIconColor(option.mode)} flex justify-center mb-2`}>\n              {getIcon(option.mode)}\n            </div>\n            <div className=\"font-semibold text-white text-xs mb-1 truncate\">\n              {option.provider}\n            </div>\n            <div className=\"flex items-center justify-center gap-1 text-cyan-400 font-bold text-base\">\n              <IndianRupee className=\"w-3.5 h-3.5\" />\n              <span>{option.fare}</span>\n            </div>\n            {option.duration && (\n              <div className=\"text-[10px] text-gray-500 mt-1\">\n                ~{option.duration}m\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Footer Note */}\n      <div className=\"text-[10px] text-gray-500 text-center\">\n        * Estimated prices for Bengaluru\n      </div>\n    </div>\n  );\n}\n","size_bytes":4471},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"SELF_HOSTING_NEXT_STEPS.md":{"content":"# Self-Hosting - Your Next Steps 🚀\n\nYour backup is ready! Here's exactly what to do next:\n\n## ✅ What's Been Done\n\n1. ✓ Backup created in `backup_20251108_110344/` folder\n2. ✓ Environment variables saved\n3. ✓ Configuration files backed up\n4. ✓ Quick start guide created\n\n## 📥 Step 1: Download Everything from Replit\n\n**Download this project:**\n1. Click on the three dots (⋮) in the file explorer\n2. Select \"Download as zip\"\n3. Save to your computer (approximately 50-100 MB)\n\n## 💰 Step 2: Choose Your Hosting Provider\n\n**Recommended Budget-Friendly Options:**\n\n| Provider | Cost/Month | RAM | Notes |\n|----------|-----------|-----|-------|\n| **Hetzner Cloud** | €4.51 (~$5) | 2GB | Best value, EU based |\n| **DigitalOcean** | $6 | 1GB | Very popular, easy to use |\n| **Vultr** | $6 | 1GB | Good performance |\n| **Oracle Cloud** | FREE | 1GB | Always free tier (limited) |\n| **AWS Lightsail** | $3.50 | 512MB | Minimal but works |\n\n**My Recommendation:** Start with **Hetzner Cloud** (best value) or **DigitalOcean** (easiest for beginners).\n\n## 🖥️ Step 3: Create Your Server\n\n### For DigitalOcean (Example):\n\n1. Go to https://www.digitalocean.com/\n2. Sign up and add payment method\n3. Click \"Create\" → \"Droplets\"\n4. Choose:\n   - **Image**: Ubuntu 22.04 LTS\n   - **Plan**: Basic ($6/month)\n   - **Datacenter**: Choose closest to your users\n   - **SSH Key**: Create and add your SSH key\n5. Click \"Create Droplet\"\n6. Wait ~60 seconds for server to be ready\n7. Note the IP address (e.g., 192.168.1.100)\n\n### For Hetzner Cloud:\n\n1. Go to https://www.hetzner.com/cloud\n2. Create account\n3. Create new project\n4. Add server:\n   - **Location**: Choose closest to you\n   - **Image**: Ubuntu 22.04\n   - **Type**: CX11 (2GB RAM, €4.51/month)\n   - **SSH Key**: Add your SSH key\n5. Create and save IP address\n\n## 🔧 Step 4: Setup Your Server (5-10 minutes)\n\n**SSH into your server:**\n```bash\nssh root@YOUR_SERVER_IP\n```\n\n**Run these commands one by one:**\n\n```bash\n# Update system\napt update && apt upgrade -y\n\n# Install Node.js 20\ncurl -fsSL https://deb.nodesource.com/setup_20.x | bash -\napt install -y nodejs\n\n# Install PM2 and Nginx\nnpm install -g pm2\napt install -y nginx\n\n# Create app directory\nmkdir -p /var/www/aroha-app\ncd /var/www/aroha-app\n```\n\n## 📤 Step 5: Upload Your Project\n\n**From your local computer:**\n\n```bash\n# Extract the ZIP you downloaded from Replit\nunzip aroha-map-app.zip\n\n# Upload to server (replace YOUR_SERVER_IP)\nscp -r aroha-map-app/* root@YOUR_SERVER_IP:/var/www/aroha-app/\n```\n\n## ⚙️ Step 6: Configure and Start\n\n**Back on your server (SSH):**\n\n```bash\ncd /var/www/aroha-app\n\n# Install dependencies\nnpm install\n\n# Create environment file\nnano .env\n```\n\n**Copy this into .env and update the values:**\n```env\nDATABASE_URL=your_database_url_here\nOPENAI_API_KEY=your_openai_key_here\nVITE_GOOGLE_MAPS_API_KEY=your_google_maps_key_here\nNODE_ENV=production\nPORT=5000\n```\n\n**Save and continue:**\n```bash\n# Build the app\nnpm run build\n\n# Push database schema\nnpx drizzle-kit push:pg\n\n# Start with PM2\npm2 start npm --name aroha -- run dev\npm2 save\npm2 startup\n# ^ Follow the command it gives you\n\n# Configure Nginx\nnano /etc/nginx/sites-available/aroha\n```\n\n**Paste this Nginx config:**\n```nginx\nserver {\n    listen 80;\n    server_name YOUR_SERVER_IP;\n\n    location / {\n        proxy_pass http://localhost:5000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n}\n```\n\n**Finish setup:**\n```bash\n# Enable site\nln -s /etc/nginx/sites-available/aroha /etc/nginx/sites-enabled/\nrm /etc/nginx/sites-enabled/default\n\n# Test and restart Nginx\nnginx -t\nsystemctl restart nginx\n\n# Open firewall\nufw allow 22\nufw allow 80\nufw allow 443\nufw --force enable\n```\n\n## 🎉 Step 7: Test Your App\n\nOpen your browser and go to:\n```\nhttp://YOUR_SERVER_IP\n```\n\nYou should see your Aroha app running!\n\n## 🔒 Optional: Add HTTPS (Recommended)\n\nIf you have a domain name:\n\n```bash\n# Install certbot\napt install -y certbot python3-certbot-nginx\n\n# Get SSL certificate (replace with your domain)\ncertbot --nginx -d your-domain.com\n\n# Follow the prompts\n```\n\n## 📊 Cost Summary\n\n**Monthly Costs:**\n- VPS Server: $5-6\n- Database (Neon free tier): $0\n- Domain (optional): ~$1/month\n- SSL Certificate: $0 (Let's Encrypt)\n- **Total: ~$5-6/month**\n\n**Plus API Usage:**\n- OpenAI Realtime API: ~$0.06/minute of audio\n- Google Maps: Free (up to 28,000 loads/month)\n\n## 🆘 Troubleshooting\n\n**App won't start?**\n```bash\npm2 logs aroha\npm2 restart aroha\n```\n\n**Can't access from browser?**\n```bash\n# Check if app is running\npm2 status\n\n# Check Nginx\nsystemctl status nginx\n\n# Check firewall\nufw status\n```\n\n**Database connection issues?**\n- Verify your DATABASE_URL in .env\n- Check Neon dashboard to ensure database is active\n- Make sure you ran `npx drizzle-kit push:pg`\n\n## 📚 Full Documentation\n\nFor more detailed instructions, see:\n- `BACKUP_AND_SELFHOST_GUIDE.md` - Complete guide\n- `backup_20251108_110344/QUICK_START.md` - Quick reference\n- `backup_20251108_110344/API_KEYS_CHECKLIST.md` - API keys needed\n\n## 🎯 Next Steps After Deployment\n\n1. Test all features (voice, map, directions)\n2. Monitor logs: `pm2 logs aroha`\n3. Setup automatic backups of your database\n4. Consider getting a domain name\n5. Add HTTPS with Let's Encrypt\n\n---\n\n**Questions?** Everything you need is in the backup folder and the detailed guide!\n\n**Ready to save money?** Let's get you self-hosted! 💪\n","size_bytes":5572},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"backup_20251108_110344/vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"SECURITY.md":{"content":"# Security Measures\n\nThis document outlines the security measures implemented to protect the application and prevent API abuse.\n\n## API Protection\n\n### 1. Rate Limiting\n\n**Session Creation Endpoint** (`/api/session`)\n- **Limit**: 5 requests per 15 minutes per IP address\n- **Purpose**: Prevents abuse of OpenAI Realtime API session creation\n- **Cost Protection**: Limits potential unauthorized API costs\n- **Implementation**: `express-rate-limit` middleware with IP-based tracking\n\n**General API Endpoints** (all `/api/*` routes)\n- **Limit**: 30 requests per minute per IP address\n- **Purpose**: Prevents general API abuse and DDoS attempts\n- **Implementation**: Applied globally to all API routes\n\n### 2. Request Monitoring & Logging\n\nAll API requests are logged with:\n- IP address\n- Request method and path\n- Response status code\n- Request duration\n- JSON response (truncated for security)\n\n**Security Events Logged**:\n- Session creation attempts\n- Rate limit violations\n- Failed session creations\n- Successful session creations\n\n**Log Format**: `[Security]` prefix for security-related events\n\n### 3. CORS Protection\n\n**Same-Origin Policy**:\n- Only requests from the same domain are allowed\n- Cross-origin requests from external sites are blocked\n- Prevents unauthorized websites from using your API\n\n**Origin Validation**:\n- Strict hostname matching using URL parsing\n- Prevents subdomain/superdomain attacks (e.g., `evil.com.attacker.net`)\n- Invalid origin URLs are rejected and logged\n- Unauthorized preflight requests return 403 Forbidden\n\n**Allowed Origins**:\n- Same-origin requests only (exact hostname match)\n- No wildcard `*` origins allowed\n- No substring-based matching (strict equality check)\n\n### 4. Security Headers\n\nAll responses include security headers:\n\n- **X-Frame-Options: DENY**\n  - Prevents clickjacking attacks\n  - Prevents the app from being embedded in iframes\n\n- **X-Content-Type-Options: nosniff**\n  - Prevents MIME type sniffing attacks\n  - Forces browsers to respect declared content types\n\n- **X-XSS-Protection: 1; mode=block**\n  - Enables XSS filtering in older browsers\n  - Blocks pages when XSS detected\n\n- **Strict-Transport-Security** (production only)\n  - Forces HTTPS connections\n  - Prevents man-in-the-middle attacks\n\n- **Permissions-Policy**\n  - Microphone: Allowed (required for voice features)\n  - Camera: Blocked (not needed)\n  - Geolocation: Blocked (not needed)\n\n## API Key Security\n\n### OpenAI API Key\n\n**Storage**:\n- Stored securely in environment variables (`OPENAI_API_KEY`)\n- Never exposed to frontend code\n- Only accessible to backend server\n\n**Usage**:\n- Used to generate ephemeral session keys (60-second TTL)\n- Ephemeral keys are provided to frontend for WebRTC connections\n- Frontend never has access to the permanent API key\n\n**Protection Methods**:\n1. Backend-only access to permanent API key\n2. Ephemeral keys expire after 60 seconds\n3. Rate limiting on session creation endpoint\n4. Request logging for audit trail\n\n### Google Maps API Key\n\n**Storage**:\n- Stored in environment variables (`VITE_GOOGLE_MAPS_API_KEY`)\n- Exposed to frontend (required for Maps API)\n\n**Recommended Protection** (configure in Google Cloud Console):\n1. Add domain restrictions (only allow your domain)\n2. Add API restrictions (only allow Maps JavaScript API)\n3. Set up usage quotas and alerts\n4. Enable billing alerts\n\n## Production Configuration\n\n### Proxy Trust Settings\n\n**Development**:\n- Proxy trust disabled\n- Direct connections only\n\n**Production**:\n- Proxy trust enabled (`app.set('trust proxy', 1)`)\n- Properly detects client IPs behind load balancers\n- Required for accurate rate limiting\n- Required for HSTS enforcement\n\n### HTTPS Enforcement\n\nIn production environments:\n- Strict-Transport-Security header is enabled\n- Forces HTTPS connections for 1 year\n- Includes subdomains\n- Requires reverse proxy to terminate TLS\n\n## Best Practices\n\n### For Deployment\n\n1. **Environment Variables**:\n   - Never commit `.env` files to version control\n   - Use Replit Secrets or similar for production\n   - Rotate API keys regularly\n\n2. **Proxy Configuration**:\n   - Ensure reverse proxy (nginx, cloudflare) properly sets X-Forwarded-* headers\n   - Verify `trust proxy` setting matches your infrastructure\n   - Test IP detection in production\n\n3. **Monitoring**:\n   - Review security logs regularly\n   - Set up alerts for rate limit violations\n   - Monitor API usage and costs\n   - Watch for CORS rejection patterns\n\n4. **Google Maps API**:\n   - Configure domain restrictions in Google Cloud Console\n   - Set up billing alerts to prevent unexpected charges\n   - Enable only required APIs\n\n5. **Rate Limits**:\n   - Adjust rate limits based on legitimate usage patterns\n   - Consider implementing user authentication for higher limits\n   - Monitor rate limit violations\n\n### For Users\n\n1. **API Keys**:\n   - Keep your OpenAI API key secret\n   - Never share your API keys\n   - Use separate keys for development and production\n\n2. **Monitoring**:\n   - Check OpenAI usage dashboard regularly\n   - Set up billing alerts\n   - Monitor for unusual activity\n\n## Incident Response\n\nIf you suspect API abuse:\n\n1. **Immediate Actions**:\n   - Check server logs for suspicious activity\n   - Review rate limit violation logs\n   - Check OpenAI usage dashboard\n\n2. **Mitigation**:\n   - Reduce rate limits if needed\n   - Block specific IP addresses if necessary\n   - Rotate API keys if compromised\n\n3. **Investigation**:\n   - Review security logs (`[Security]` prefix)\n   - Check for unusual request patterns\n   - Verify all API costs\n\n## Security Checklist\n\n- [x] Rate limiting on session creation endpoint\n- [x] General API rate limiting\n- [x] CORS protection enabled\n- [x] Security headers configured\n- [x] Request logging and monitoring\n- [x] API keys stored in environment variables\n- [x] Ephemeral session keys used for WebRTC\n- [ ] Google Maps API domain restrictions (configure in Google Cloud Console)\n- [ ] Billing alerts configured (configure in OpenAI dashboard)\n- [ ] Regular security log reviews (ongoing maintenance)\n\n## Rate Limit Response\n\nWhen rate limits are exceeded, clients receive:\n\n```json\n{\n  \"error\": \"Too many session requests. Please wait before trying again.\",\n  \"retryAfter\": 900\n}\n```\n\nStatus Code: `429 Too Many Requests`\n\nHeaders:\n- `RateLimit-Limit`: Maximum requests allowed\n- `RateLimit-Remaining`: Requests remaining in window\n- `RateLimit-Reset`: Time when limit resets (Unix timestamp)\n\n## Support\n\nFor security concerns or to report vulnerabilities, check server logs and monitor API usage in:\n- OpenAI Dashboard: https://platform.openai.com/usage\n- Google Cloud Console: https://console.cloud.google.com\n","size_bytes":6663},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/MicrophoneButton.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { Mic } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface MicrophoneButtonProps {\n  onRecordingStart?: () => void;\n  onRecordingStop?: (transcript: string, response: string) => void;\n}\n\nexport default function MicrophoneButton({ onRecordingStart, onRecordingStop }: MicrophoneButtonProps) {\n  const [isRecording, setIsRecording] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const { toast } = useToast();\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const audioChunksRef = useRef<Blob[]>([]);\n\n  const handleToggleRecording = async () => {\n    if (isRecording) {\n      // Stop recording\n      setIsRecording(false);\n      if (mediaRecorderRef.current && mediaRecorderRef.current.state === \"recording\") {\n        mediaRecorderRef.current.stop();\n      }\n    } else {\n      // Start recording\n      if (!navigator.mediaDevices?.getUserMedia) {\n        toast({\n          title: \"Microphone not available\",\n          description: \"Your browser doesn't support audio recording\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n        audioChunksRef.current = [];\n\n        const mediaRecorder = new MediaRecorder(stream);\n        mediaRecorderRef.current = mediaRecorder;\n\n        mediaRecorder.ondataavailable = (event) => {\n          if (event.data.size > 0) {\n            audioChunksRef.current.push(event.data);\n          }\n        };\n\n        mediaRecorder.onstop = async () => {\n          setIsProcessing(true);\n          const audioBlob = new Blob(audioChunksRef.current, { type: \"audio/webm\" });\n          \n          // Send to backend for transcription\n          const formData = new FormData();\n          formData.append(\"audio\", audioBlob, \"recording.webm\");\n\n          try {\n            const response = await fetch(\"/api/transcribe\", {\n              method: \"POST\",\n              body: formData,\n            });\n\n            if (!response.ok) {\n              throw new Error(\"Transcription failed\");\n            }\n\n            const data = await response.json();\n            \n            if (data.error) {\n              throw new Error(data.error);\n            }\n            \n            onRecordingStop?.(data.transcript, data.response);\n            \n            toast({\n              title: \"Conversation ended\",\n              description: \"Voice input processed successfully\",\n            });\n          } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : \"Failed to process voice input\";\n            toast({\n              title: \"Processing failed\",\n              description: errorMessage,\n              variant: \"destructive\",\n            });\n          } finally {\n            setIsProcessing(false);\n            stream.getTracks().forEach(track => track.stop());\n          }\n        };\n\n        mediaRecorder.start();\n        setIsRecording(true);\n        onRecordingStart?.();\n        \n        toast({\n          title: \"Conversation started\",\n          description: \"Speak now...\",\n        });\n      } catch (error) {\n        toast({\n          title: \"Microphone access denied\",\n          description: \"Please allow microphone access\",\n          variant: \"destructive\",\n        });\n      }\n    }\n  };\n\n  return (\n    <div className=\"fixed bottom-8 left-1/2 -translate-x-1/2 z-50\">\n      <div className=\"relative group\">\n        <button\n          onClick={handleToggleRecording}\n          disabled={isProcessing}\n          data-testid=\"button-microphone\"\n          className={`relative w-20 h-20 rounded-full transition-all duration-300 cursor-pointer border-2 flex items-center justify-center ${\n            isProcessing\n              ? \"bg-black/80 border-yellow-500 shadow-[0_0_40px_rgba(234,179,8,0.6)] animate-pulse cursor-wait\"\n              : isRecording \n              ? \"bg-black/80 border-red-500 shadow-[0_0_40px_rgba(239,68,68,0.6)] scale-105 animate-pulse\" \n              : \"bg-black/70 border-cyan-500 shadow-[0_0_25px_rgba(6,182,212,0.4)] hover:shadow-[0_0_45px_rgba(6,182,212,0.7)] hover:scale-105 hover:bg-black/85\"\n          }`}\n        >\n          <Mic \n            className={`transition-all duration-300 ${\n              isProcessing\n                ? \"w-8 h-8 text-yellow-500 drop-shadow-[0_0_10px_rgba(234,179,8,0.9)]\"\n                : isRecording \n                ? \"w-8 h-8 text-red-500 drop-shadow-[0_0_10px_rgba(239,68,68,0.9)]\" \n                : \"w-8 h-8 text-cyan-400 drop-shadow-[0_0_8px_rgba(6,182,212,0.8)] group-hover:drop-shadow-[0_0_12px_rgba(6,182,212,1)]\"\n            }`}\n          />\n        </button>\n        \n        {isRecording && (\n          <div className=\"absolute top-0 right-0 w-4 h-4 bg-red-500 rounded-full animate-pulse shadow-[0_0_12px_rgba(239,68,68,0.9)]\" data-testid=\"indicator-recording\" />\n        )}\n        \n        {isProcessing && (\n          <div className=\"absolute top-0 right-0 w-4 h-4 bg-yellow-500 rounded-full animate-pulse shadow-[0_0_12px_rgba(234,179,8,0.9)]\" data-testid=\"indicator-processing\" />\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":5215},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"DEPLOY_TO_AZURE_40.81.228.90.sh":{"content":"#!/bin/bash\n\n# Aroha App - Azure VM Deployment Script\n# VM: Standard B4as v2 (4 vcpus, 16 GiB memory)\n# IP: 40.81.228.90\n\necho \"==========================================\"\necho \"Aroha App - Azure Deployment\"\necho \"IP: 40.81.228.90\"\necho \"==========================================\"\necho \"\"\n\n# Color codes for output\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nRED='\\033[0;31m'\nNC='\\033[0m' # No Color\n\n# Check if running on Azure VM or local computer\nif [ -f /etc/azure/vm-id ] || [ -f /var/lib/waagent/provisioned ] || hostname | grep -q \"azure\"; then\n    echo -e \"${GREEN}✓ Running on Azure VM${NC}\"\n    ON_AZURE=true\nelse\n    echo -e \"${YELLOW}ℹ Running on local computer${NC}\"\n    ON_AZURE=false\nfi\n\nif [ \"$ON_AZURE\" = true ]; then\n    echo \"\"\n    echo \"==========================================\"\n    echo \"STEP 1: Installing Required Software\"\n    echo \"==========================================\"\n    \n    # Update system\n    echo -e \"${YELLOW}→ Updating system packages...${NC}\"\n    sudo apt update -qq\n    \n    # Install Node.js 20\n    if ! command -v node &> /dev/null; then\n        echo -e \"${YELLOW}→ Installing Node.js 20...${NC}\"\n        curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash - > /dev/null 2>&1\n        sudo apt install -y nodejs -qq\n        echo -e \"${GREEN}✓ Node.js installed: $(node --version)${NC}\"\n    else\n        echo -e \"${GREEN}✓ Node.js already installed: $(node --version)${NC}\"\n    fi\n    \n    # Install PM2\n    if ! command -v pm2 &> /dev/null; then\n        echo -e \"${YELLOW}→ Installing PM2...${NC}\"\n        sudo npm install -g pm2 > /dev/null 2>&1\n        echo -e \"${GREEN}✓ PM2 installed${NC}\"\n    else\n        echo -e \"${GREEN}✓ PM2 already installed${NC}\"\n    fi\n    \n    # Install Nginx\n    if ! command -v nginx &> /dev/null; then\n        echo -e \"${YELLOW}→ Installing Nginx...${NC}\"\n        sudo apt install -y nginx -qq\n        echo -e \"${GREEN}✓ Nginx installed${NC}\"\n    else\n        echo -e \"${GREEN}✓ Nginx already installed${NC}\"\n    fi\n    \n    echo \"\"\n    echo \"==========================================\"\n    echo \"STEP 2: Creating Application Directory\"\n    echo \"==========================================\"\n    \n    # Create app directory\n    sudo mkdir -p /var/www/aroha-app\n    sudo chown -R $USER:$USER /var/www/aroha-app\n    echo -e \"${GREEN}✓ Directory created: /var/www/aroha-app${NC}\"\n    \n    echo \"\"\n    echo \"==========================================\"\n    echo \"STEP 3: Next Steps - Upload Your Files\"\n    echo \"==========================================\"\n    echo \"\"\n    echo \"From your LOCAL computer, run this command:\"\n    echo \"\"\n    echo -e \"${YELLOW}cd /path/to/extracted/replit/project${NC}\"\n    echo -e \"${YELLOW}scp -r * azureuser@40.81.228.90:/var/www/aroha-app/${NC}\"\n    echo \"\"\n    echo \"After uploading files, run this script again to continue setup!\"\n    echo \"\"\n    \nelse\n    echo \"\"\n    echo \"==========================================\"\n    echo \"Upload Project Files to Azure VM\"\n    echo \"==========================================\"\n    echo \"\"\n    echo \"Run this command from your project directory:\"\n    echo \"\"\n    echo -e \"${YELLOW}scp -r * azureuser@40.81.228.90:/var/www/aroha-app/${NC}\"\n    echo \"\"\n    echo \"Or if using SSH key:\"\n    echo -e \"${YELLOW}scp -i /path/to/key.pem -r * azureuser@40.81.228.90:/var/www/aroha-app/${NC}\"\n    echo \"\"\n    echo \"Then SSH into the VM and continue:\"\n    echo -e \"${YELLOW}ssh azureuser@40.81.228.90${NC}\"\n    echo \"\"\nfi\n","size_bytes":3493},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"README.md":{"content":"# replit_test\n","size_bytes":14},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/MapContainer.tsx":{"content":"/// <reference types=\"@types/google.maps\" />\nimport { useEffect, useRef, useState, forwardRef, useImperativeHandle } from \"react\";\nimport { Search, MapPin } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ndeclare global {\n  interface Window {\n    google: typeof google;\n  }\n}\n\ninterface MapContainerProps {\n  onLocationChange?: (location: { lat: number; lng: number }) => void;\n  onReady?: () => void;\n}\n\nexport interface Place {\n  name: string;\n  address: string;\n  location: { lat: number; lng: number };\n  rating?: number;\n  userRatingsTotal?: number;\n  priceLevel?: number;\n  openNow?: boolean;\n  types?: string[];\n}\n\nexport interface MapContainerRef {\n  ensureReady: () => Promise<void>;\n  searchLocation: (query: string) => Promise<{ \n    success: boolean; \n    location?: { lat: number; lng: number }; \n    address?: string; \n    error?: string;\n    technicalError?: string;\n    status?: string;\n  }>;\n  centerMap: (lat: number, lng: number, zoom?: number) => void;\n  addMarker: (lat: number, lng: number, label?: string) => void;\n  drawRoute: (encodedPolyline: string, bounds?: any) => void;\n  clearRoute: () => void;\n  setMapType: (type: 'roadmap' | 'satellite' | 'hybrid') => void;\n  showPlaces: (places: Place[]) => void;\n  clearPlaces: () => void;\n}\n\nconst MapContainer = forwardRef<MapContainerRef, MapContainerProps>(({ onLocationChange, onReady }, ref) => {\n  const mapRef = useRef<HTMLDivElement>(null);\n  const mapInstanceRef = useRef<google.maps.Map | null>(null);\n  const markersRef = useRef<google.maps.Marker[]>([]);\n  const polylineRef = useRef<google.maps.Polyline | null>(null);\n  const placeMarkersRef = useRef<google.maps.Marker[]>([]);\n  const infoWindowsRef = useRef<google.maps.InfoWindow[]>([]);\n  const [searchValue, setSearchValue] = useState(\"\");\n  const { toast } = useToast();\n  \n  // Map readiness promise\n  const readyPromiseRef = useRef<Promise<void>>();\n  const readyResolveRef = useRef<(() => void) | null>(null);\n  const readyRejectRef = useRef<((reason: any) => void) | null>(null);\n  \n  // Initialize the ready promise with timeout\n  if (!readyPromiseRef.current) {\n    readyPromiseRef.current = new Promise<void>((resolve, reject) => {\n      readyResolveRef.current = resolve;\n      readyRejectRef.current = reject;\n      \n      // Reject after 10 seconds if map hasn't initialized\n      setTimeout(() => {\n        if (readyRejectRef.current === reject) {\n          reject(new Error(\"Map initialization timeout\"));\n        }\n      }, 10000);\n    });\n  }\n\n  // Clear all markers from the map\n  const clearMarkers = () => {\n    markersRef.current.forEach(marker => marker.setMap(null));\n    markersRef.current = [];\n  };\n\n  // Clear all place markers and info windows\n  const clearPlaces = () => {\n    placeMarkersRef.current.forEach(marker => marker.setMap(null));\n    placeMarkersRef.current = [];\n    infoWindowsRef.current.forEach(infoWindow => infoWindow.close());\n    infoWindowsRef.current = [];\n  };\n\n  // Clear the route polyline from the map\n  const clearRoute = () => {\n    if (polylineRef.current) {\n      polylineRef.current.setMap(null);\n      polylineRef.current = null;\n    }\n  };\n\n  // Expose imperative methods to parent component\n  useImperativeHandle(ref, () => ({\n    ensureReady: () => {\n      return readyPromiseRef.current!;\n    },\n    \n    searchLocation: async (query: string) => {\n      if (!window.google) {\n        const error = \"Google Maps is not loaded yet. Please wait a moment and try again.\";\n        console.error(\"[MapContainer] searchLocation failed:\", error);\n        toast({\n          title: \"Map Not Ready\",\n          description: error,\n          variant: \"destructive\",\n        });\n        return { success: false, error };\n      }\n\n      if (!mapInstanceRef.current) {\n        const error = \"Map is not initialized yet. Please wait a moment.\";\n        console.error(\"[MapContainer] searchLocation failed:\", error);\n        return { success: false, error };\n      }\n\n      console.log(\"[MapContainer] Searching for location:\", query);\n\n      return new Promise((resolve) => {\n        const geocoder = new google.maps.Geocoder();\n        geocoder.geocode({ address: query }, (results, status) => {\n          console.log(\"[MapContainer] Geocoding status:\", status);\n          \n          if (status === \"OK\" && results && results[0]) {\n            const location = results[0].geometry.location;\n            const latLng = { lat: location.lat(), lng: location.lng() };\n            const address = results[0].formatted_address;\n            \n            console.log(\"[MapContainer] Location found:\", address, latLng);\n            \n            // Clear previous markers before adding new one\n            clearMarkers();\n            \n            mapInstanceRef.current?.setCenter(location);\n            mapInstanceRef.current?.setZoom(14);\n            \n            const marker = new google.maps.Marker({\n              map: mapInstanceRef.current!,\n              position: location,\n              animation: google.maps.Animation.DROP,\n            });\n            markersRef.current.push(marker);\n\n            onLocationChange?.(latLng);\n            \n            toast({\n              title: \"Location found\",\n              description: address,\n            });\n            \n            resolve({\n              success: true,\n              location: latLng,\n              address\n            });\n          } else {\n            // Provide detailed error information\n            let errorMessage = \"Could not find that location.\";\n            let detailedError = `Geocoding failed with status: ${status}`;\n            \n            switch (status) {\n              case \"ZERO_RESULTS\":\n                errorMessage = `I couldn't find \"${query}\". Please try a different search term or be more specific.`;\n                detailedError = `No results found for query: \"${query}\"`;\n                toast({\n                  title: \"Location not found\",\n                  description: errorMessage,\n                  variant: \"destructive\",\n                });\n                break;\n              case \"REQUEST_DENIED\":\n                errorMessage = \"The map service is not properly configured. Please check the API key settings.\";\n                detailedError = \"Geocoding API access denied. The API key may not have Geocoding API enabled.\";\n                toast({\n                  title: \"Map Configuration Error\",\n                  description: \"The Geocoding API is not enabled. Please enable it in the Google Cloud Console.\",\n                  variant: \"destructive\",\n                });\n                break;\n              case \"INVALID_REQUEST\":\n                errorMessage = `The search term \"${query}\" is not valid. Please try a different search.`;\n                detailedError = \"Invalid geocoding request\";\n                break;\n              case \"OVER_QUERY_LIMIT\":\n                errorMessage = \"Too many map requests. Please try again in a moment.\";\n                detailedError = \"Geocoding API quota exceeded\";\n                break;\n              case \"UNKNOWN_ERROR\":\n                errorMessage = \"A temporary error occurred. Please try again.\";\n                detailedError = \"Unknown geocoding error\";\n                break;\n            }\n            \n            console.error(\"[MapContainer] Geocoding error:\", detailedError);\n            \n            resolve({\n              success: false,\n              error: errorMessage,\n              technicalError: detailedError,\n              status\n            });\n          }\n        });\n      });\n    },\n\n    centerMap: (lat: number, lng: number, zoom?: number) => {\n      if (!mapInstanceRef.current) return;\n      \n      const latLng = { lat, lng };\n      mapInstanceRef.current.setCenter(latLng);\n      if (zoom !== undefined) {\n        mapInstanceRef.current.setZoom(zoom);\n      }\n      onLocationChange?.(latLng);\n    },\n\n    addMarker: (lat: number, lng: number, label?: string) => {\n      if (!mapInstanceRef.current) return;\n      \n      const marker = new google.maps.Marker({\n        map: mapInstanceRef.current,\n        position: { lat, lng },\n        label: label,\n        animation: google.maps.Animation.DROP,\n      });\n      markersRef.current.push(marker);\n    },\n\n    drawRoute: (encodedPolyline: string, bounds?: any) => {\n      if (!mapInstanceRef.current || !window.google) return;\n      \n      // Clear any existing route\n      clearRoute();\n      \n      // Decode the polyline\n      const path = google.maps.geometry.encoding.decodePath(encodedPolyline);\n      \n      // Create and display the polyline with cyan color\n      polylineRef.current = new google.maps.Polyline({\n        path: path,\n        geodesic: true,\n        strokeColor: \"#06B6D4\", // Cyan color matching the theme\n        strokeOpacity: 0.9,\n        strokeWeight: 4,\n        map: mapInstanceRef.current,\n      });\n      \n      // Fit map to route bounds if provided\n      if (bounds) {\n        const googleBounds = new google.maps.LatLngBounds(\n          new google.maps.LatLng(bounds.southwest.lat, bounds.southwest.lng),\n          new google.maps.LatLng(bounds.northeast.lat, bounds.northeast.lng)\n        );\n        mapInstanceRef.current.fitBounds(googleBounds);\n      }\n      \n      console.log(\"[MapContainer] Route drawn on map\");\n    },\n\n    clearRoute: () => {\n      clearRoute();\n      console.log(\"[MapContainer] Route cleared from map\");\n    },\n\n    setMapType: (type: 'roadmap' | 'satellite' | 'hybrid') => {\n      if (!mapInstanceRef.current) return;\n      mapInstanceRef.current.setMapTypeId(type);\n      console.log(\"[MapContainer] Map type changed to:\", type);\n    },\n\n    showPlaces: (places: Place[]) => {\n      if (!mapInstanceRef.current || !window.google) return;\n\n      // Clear existing place markers\n      clearPlaces();\n\n      console.log(`[MapContainer] Displaying ${places.length} places on map`);\n\n      // Create markers for each place\n      places.forEach((place, index) => {\n        const marker = new google.maps.Marker({\n          map: mapInstanceRef.current!,\n          position: place.location,\n          title: place.name,\n          animation: google.maps.Animation.DROP,\n          icon: {\n            url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'\n          }\n        });\n\n        // Create info window content\n        const ratingStars = place.rating \n          ? '⭐'.repeat(Math.round(place.rating)) \n          : '';\n        \n        const priceSymbols = place.priceLevel \n          ? '$'.repeat(place.priceLevel) \n          : '';\n\n        const openStatus = place.openNow !== undefined\n          ? place.openNow \n            ? '<span style=\"color: green;\">● Open now</span>'\n            : '<span style=\"color: red;\">● Closed</span>'\n          : '';\n\n        const infoContent = `\n          <div style=\"padding: 8px; max-width: 250px;\">\n            <h3 style=\"margin: 0 0 8px 0; font-size: 14px; font-weight: 600;\">${place.name}</h3>\n            <p style=\"margin: 0 0 4px 0; font-size: 12px; color: #666;\">${place.address}</p>\n            ${place.rating ? `<div style=\"margin: 4px 0; font-size: 12px;\">${ratingStars} ${place.rating.toFixed(1)} (${place.userRatingsTotal || 0} reviews)</div>` : ''}\n            ${priceSymbols ? `<div style=\"margin: 4px 0; font-size: 12px;\">${priceSymbols}</div>` : ''}\n            ${openStatus ? `<div style=\"margin: 4px 0; font-size: 12px;\">${openStatus}</div>` : ''}\n          </div>\n        `;\n\n        const infoWindow = new google.maps.InfoWindow({\n          content: infoContent\n        });\n\n        // Show info window on marker click\n        marker.addListener('click', () => {\n          // Close all other info windows\n          infoWindowsRef.current.forEach(iw => iw.close());\n          infoWindow.open(mapInstanceRef.current!, marker);\n        });\n\n        placeMarkersRef.current.push(marker);\n        infoWindowsRef.current.push(infoWindow);\n      });\n\n      // Fit map to show all markers\n      if (places.length > 0) {\n        const bounds = new google.maps.LatLngBounds();\n        places.forEach(place => {\n          bounds.extend(place.location);\n        });\n        mapInstanceRef.current.fitBounds(bounds);\n        \n        // Zoom out a bit if only one place\n        if (places.length === 1) {\n          setTimeout(() => {\n            mapInstanceRef.current?.setZoom(15);\n          }, 500);\n        }\n      }\n    },\n\n    clearPlaces: () => {\n      clearPlaces();\n      console.log(\"[MapContainer] Cleared all place markers\");\n    }\n  }));\n\n  useEffect(() => {\n    if (!mapRef.current || mapInstanceRef.current) return;\n\n    const loadGoogleMaps = () => {\n      const apiKey = import.meta.env.VITE_GOOGLE_MAPS_API_KEY;\n      if (!apiKey) {\n        console.error('Google Maps API key is missing');\n        toast({\n          title: \"Configuration Error\",\n          description: \"Google Maps API key is not configured\",\n          variant: \"destructive\",\n        });\n        // Reject the ready promise\n        if (readyRejectRef.current) {\n          readyRejectRef.current(new Error(\"Google Maps API key is missing\"));\n        }\n        return;\n      }\n\n      if (window.google) {\n        initMap();\n        return;\n      }\n\n      const script = document.createElement('script');\n      script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places,geometry`;\n      script.async = true;\n      script.defer = true;\n      script.onload = initMap;\n      script.onerror = () => {\n        console.error('Failed to load Google Maps script');\n        toast({\n          title: \"Map Load Error\",\n          description: \"Failed to load Google Maps. Please check your connection.\",\n          variant: \"destructive\",\n        });\n        // Reject the ready promise\n        if (readyRejectRef.current) {\n          readyRejectRef.current(new Error(\"Failed to load Google Maps script\"));\n        }\n      };\n      document.head.appendChild(script);\n    };\n\n    const initMap = () => {\n      if (!window.google || !mapRef.current) return;\n\n      const defaultCenter = { lat: 40.7128, lng: -74.0060 };\n      \n      mapInstanceRef.current = new google.maps.Map(mapRef.current, {\n        center: defaultCenter,\n        zoom: 12,\n        zoomControl: true,\n        mapTypeControl: false,\n        scaleControl: false,\n        streetViewControl: false,\n        rotateControl: false,\n        fullscreenControl: false,\n        styles: [\n          {\n            featureType: \"all\",\n            elementType: \"geometry\",\n            stylers: [{ color: \"#f5f5f5\" }]\n          },\n          {\n            featureType: \"water\",\n            elementType: \"geometry\",\n            stylers: [{ color: \"#e9e9e9\" }]\n          }\n        ]\n      });\n      \n      // Resolve the ready promise and notify parent\n      console.log(\"[MapContainer] Map initialized and ready\");\n      if (readyResolveRef.current) {\n        readyResolveRef.current();\n        // Clear reject ref to prevent timeout from firing\n        readyRejectRef.current = null;\n      }\n      onReady?.();\n    };\n\n    loadGoogleMaps();\n  }, [toast, onReady]);\n\n  const handleSearch = () => {\n    if (!searchValue.trim() || !window.google) return;\n\n    const geocoder = new google.maps.Geocoder();\n    geocoder.geocode({ address: searchValue }, (results, status) => {\n      if (status === \"OK\" && results && results[0]) {\n        const location = results[0].geometry.location;\n        const latLng = { lat: location.lat(), lng: location.lng() };\n        \n        mapInstanceRef.current?.setCenter(location);\n        mapInstanceRef.current?.setZoom(14);\n        \n        new google.maps.Marker({\n          map: mapInstanceRef.current!,\n          position: location,\n        });\n\n        onLocationChange?.(latLng);\n        \n        toast({\n          title: \"Location found\",\n          description: results[0].formatted_address,\n        });\n      } else {\n        toast({\n          title: \"Location not found\",\n          description: \"Please try a different search term\",\n          variant: \"destructive\",\n        });\n      }\n    });\n  };\n\n  const handleCurrentLocation = () => {\n    if (!navigator.geolocation) {\n      toast({\n        title: \"Geolocation not supported\",\n        description: \"Your browser doesn't support geolocation\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const latLng = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude,\n        };\n        \n        mapInstanceRef.current?.setCenter(latLng);\n        mapInstanceRef.current?.setZoom(14);\n        \n        new google.maps.Marker({\n          map: mapInstanceRef.current!,\n          position: latLng,\n        });\n\n        onLocationChange?.(latLng);\n        \n        toast({\n          title: \"Current location\",\n          description: \"Centered map on your location\",\n        });\n      },\n      () => {\n        toast({\n          title: \"Location access denied\",\n          description: \"Please enable location access\",\n          variant: \"destructive\",\n        });\n      }\n    );\n  };\n\n  return (\n    <div className=\"w-full h-full relative\">\n      <div ref={mapRef} className=\"w-full h-full\" data-testid=\"map-container\" />\n      \n      <button\n        onClick={handleCurrentLocation}\n        className=\"absolute top-4 right-4 w-10 h-10 bg-white rounded-md shadow-lg flex items-center justify-center border border-gray-300 hover:bg-gray-50 transition-colors z-[1000]\"\n        data-testid=\"button-current-location\"\n      >\n        <MapPin className=\"w-5 h-5 text-gray-700\" />\n      </button>\n    </div>\n  );\n});\n\nMapContainer.displayName = \"MapContainer\";\n\nexport default MapContainer;\n","size_bytes":17794},"AZURE_DEPLOYMENT_GUIDE.md":{"content":"# Deploy to Azure VM - Step by Step Guide\n\nYou already have an Azure VM! Let's get your app deployed.\n\n## Prerequisites\n\nMake sure your Azure VM has:\n- Ubuntu 20.04 or 22.04 (or similar Linux)\n- At least 1GB RAM (2GB recommended)\n- Port 80 and 443 open in Network Security Group\n- SSH access configured\n\n## Step 1: Get Your Azure VM Details\n\nFrom Azure Portal, note down:\n- **Public IP Address**: (e.g., 20.123.45.67)\n- **SSH Username**: (usually `azureuser` or whatever you set)\n- **SSH Key or Password**: Your authentication method\n\n## Step 2: Download Your Project from Replit\n\n1. In Replit, click the three dots (⋮) in the file explorer\n2. Select \"Download as zip\"\n3. Save to your computer\n4. Extract the zip file\n\n## Step 3: Connect to Your Azure VM\n\n**If using SSH key:**\n```bash\nssh -i /path/to/your-key.pem azureuser@YOUR_AZURE_IP\n```\n\n**If using password:**\n```bash\nssh azureuser@YOUR_AZURE_IP\n# Enter password when prompted\n```\n\n## Step 4: Install Required Software on Azure VM\n\nOnce connected to your VM, run these commands:\n\n```bash\n# Update system packages\nsudo apt update && sudo apt upgrade -y\n\n# Install Node.js 20.x\ncurl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -\nsudo apt install -y nodejs\n\n# Verify installation\nnode --version  # Should show v20.x.x\nnpm --version   # Should show 10.x.x\n\n# Install PM2 (process manager)\nsudo npm install -g pm2\n\n# Install Nginx (web server)\nsudo apt install -y nginx\n\n# Install Git (optional, for future updates)\nsudo apt install -y git\n\necho \"✅ All software installed!\"\n```\n\n## Step 5: Create Application Directory\n\n```bash\n# Create directory for your app\nsudo mkdir -p /var/www/aroha-app\nsudo chown -R $USER:$USER /var/www/aroha-app\ncd /var/www/aroha-app\n```\n\n## Step 6: Upload Your Project Files\n\n**Option A: Using SCP (from your local computer)**\n\nOpen a **NEW terminal on your local computer** (not SSH):\n\n```bash\n# Navigate to where you extracted the Replit zip\ncd /path/to/extracted/aroha-app\n\n# Upload everything to Azure VM\nscp -r * azureuser@YOUR_AZURE_IP:/var/www/aroha-app/\n\n# Or if using SSH key:\nscp -i /path/to/your-key.pem -r * azureuser@YOUR_AZURE_IP:/var/www/aroha-app/\n```\n\n**Option B: Using FileZilla (GUI Method)**\n1. Download FileZilla\n2. Connect to your Azure VM IP\n3. Upload all files to `/var/www/aroha-app/`\n\n**Option C: Using Git (if you pushed to GitHub)**\n```bash\n# On Azure VM:\ncd /var/www/aroha-app\ngit clone https://github.com/yourusername/your-repo.git .\n```\n\n## Step 7: Setup Environment Variables\n\n**Back on your Azure VM SSH session:**\n\n```bash\ncd /var/www/aroha-app\n\n# Create .env file\nnano .env\n```\n\n**Copy and paste this, then update with your actual values:**\n\n```env\n# Database Connection (keep using Neon or use Azure PostgreSQL)\nDATABASE_URL=postgresql://user:password@host:port/database\n\n# OpenAI API Key\nOPENAI_API_KEY=sk-proj-your-key-here\n\n# Google Maps API Key (MUST start with VITE_)\nVITE_GOOGLE_MAPS_API_KEY=your-google-maps-key\n\n# Node Environment\nNODE_ENV=production\nPORT=5000\n```\n\n**Save the file:**\n- Press `Ctrl + O` (save)\n- Press `Enter` (confirm)\n- Press `Ctrl + X` (exit)\n\n## Step 8: Install Dependencies and Build\n\n```bash\ncd /var/www/aroha-app\n\n# Install all npm packages\nnpm install\n\n# This might take 2-3 minutes\necho \"✅ Dependencies installed!\"\n\n# Build the application\nnpm run build\n\necho \"✅ Build complete!\"\n```\n\n## Step 9: Setup Database\n\n```bash\n# Push your database schema to production\nnpx drizzle-kit push:pg\n\n# You should see: \"✓ Your schema has been pushed successfully\"\n```\n\n## Step 10: Start Application with PM2\n\n```bash\n# Start the app with PM2\npm2 start npm --name \"aroha-app\" -- run dev\n\n# Save PM2 configuration\npm2 save\n\n# Make PM2 start on server reboot\npm2 startup\n# ⚠️ IMPORTANT: Copy and run the command it shows you\n\n# Check if app is running\npm2 status\npm2 logs aroha-app --lines 20\n```\n\nYou should see: `[express] serving on port 5000`\n\n## Step 11: Configure Nginx Reverse Proxy\n\n```bash\n# Create Nginx configuration\nsudo nano /etc/nginx/sites-available/aroha-app\n```\n\n**Paste this configuration:**\n\n```nginx\nserver {\n    listen 80;\n    server_name YOUR_AZURE_IP;  # Replace with your actual Azure IP\n\n    location / {\n        proxy_pass http://localhost:5000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Important for WebRTC\n        proxy_read_timeout 300s;\n        proxy_connect_timeout 75s;\n    }\n}\n```\n\n**Save and continue:**\n\n```bash\n# Enable the site\nsudo ln -s /etc/nginx/sites-available/aroha-app /etc/nginx/sites-enabled/\n\n# Remove default site\nsudo rm /etc/nginx/sites-enabled/default\n\n# Test Nginx configuration\nsudo nginx -t\n\n# Should see: \"test is successful\"\n\n# Restart Nginx\nsudo systemctl restart nginx\n\n# Check Nginx status\nsudo systemctl status nginx\n```\n\n## Step 12: Configure Azure Firewall\n\n**In Azure Portal:**\n\n1. Go to your VM\n2. Click \"Networking\" in left sidebar\n3. Click \"Network security group\"\n4. Click \"Inbound security rules\"\n5. Add these rules:\n\n**Rule 1: HTTP**\n- Port: 80\n- Protocol: TCP\n- Source: Any\n- Action: Allow\n- Priority: 100\n- Name: Allow-HTTP\n\n**Rule 2: HTTPS**\n- Port: 443\n- Protocol: TCP\n- Source: Any\n- Action: Allow\n- Priority: 101\n- Name: Allow-HTTPS\n\n**Rule 3: SSH (if not already there)**\n- Port: 22\n- Protocol: TCP\n- Source: Your IP or Any\n- Action: Allow\n- Priority: 102\n- Name: Allow-SSH\n\n## Step 13: Test Your Application! 🎉\n\nOpen your browser and go to:\n```\nhttp://YOUR_AZURE_IP\n```\n\nYou should see your Aroha voice & map application!\n\n## Verification Checklist\n\n- [ ] App loads in browser\n- [ ] Voice conversation starts (microphone permission)\n- [ ] Can hear Aroha speaking\n- [ ] Map appears when asking about locations\n- [ ] Search location works\n- [ ] Get directions works\n- [ ] Transportation pricing shows\n\n## Optional: Add HTTPS with SSL\n\n**If you have a domain name pointed to your Azure IP:**\n\n```bash\n# Install Certbot\nsudo apt install -y certbot python3-certbot-nginx\n\n# Get SSL certificate (replace your-domain.com)\nsudo certbot --nginx -d your-domain.com\n\n# Follow the prompts\n# Certbot will automatically update your Nginx config\n\n# Test auto-renewal\nsudo certbot renew --dry-run\n```\n\n**Update Nginx config to use your domain:**\n```bash\nsudo nano /etc/nginx/sites-available/aroha-app\n# Change server_name from IP to your-domain.com\n```\n\n## Common Commands for Management\n\n```bash\n# View app logs\npm2 logs aroha-app\n\n# Restart app\npm2 restart aroha-app\n\n# Stop app\npm2 stop aroha-app\n\n# View app status\npm2 status\n\n# Monitor app in real-time\npm2 monit\n\n# View Nginx logs\nsudo tail -f /var/log/nginx/error.log\nsudo tail -f /var/log/nginx/access.log\n```\n\n## Updating Your App\n\nWhen you make changes in Replit:\n\n```bash\n# Download new zip from Replit\n# Upload to Azure VM using SCP:\nscp -r * azureuser@YOUR_AZURE_IP:/var/www/aroha-app/\n\n# SSH into Azure VM\nssh azureuser@YOUR_AZURE_IP\n\n# Navigate to app directory\ncd /var/www/aroha-app\n\n# Install any new dependencies\nnpm install\n\n# Rebuild\nnpm run build\n\n# Restart app\npm2 restart aroha-app\n\n# Check logs\npm2 logs aroha-app --lines 50\n```\n\n## Troubleshooting\n\n### App won't start\n```bash\n# Check PM2 logs for errors\npm2 logs aroha-app --lines 100\n\n# Check if port 5000 is already in use\nsudo lsof -i :5000\n\n# Try restarting\npm2 delete aroha-app\npm2 start npm --name \"aroha-app\" -- run dev\n```\n\n### Can't access from browser\n```bash\n# Check if app is running\npm2 status\n\n# Check Nginx is running\nsudo systemctl status nginx\n\n# Restart Nginx\nsudo systemctl restart nginx\n\n# Check Azure firewall rules in portal\n```\n\n### Database connection errors\n```bash\n# Test database connection\npsql \"$DATABASE_URL\"\n\n# Verify DATABASE_URL in .env\ncat .env | grep DATABASE_URL\n\n# Try pushing schema again\nnpx drizzle-kit push:pg\n```\n\n### Voice/WebRTC not working\n- **HTTPS Required**: WebRTC needs HTTPS in production\n  - Get a domain name\n  - Use Let's Encrypt (free SSL)\n- Check browser console for errors (F12)\n- Verify OPENAI_API_KEY is correct\n- Check if microphone permission is granted\n\n### Google Maps not loading\n- Verify VITE_GOOGLE_MAPS_API_KEY in .env\n- Ensure key starts with `VITE_`\n- Check these APIs are enabled in Google Cloud Console:\n  - Maps JavaScript API\n  - Places API\n  - Directions API\n  - Geocoding API\n\n## Azure-Specific Tips\n\n**Save Money:**\n- Stop VM when not in use: Azure Portal → VM → Stop\n- Use B1s size for development ($7-10/month)\n- Use auto-shutdown feature in Azure\n\n**Backups:**\n- Enable Azure Backup for your VM\n- Or manually backup: `sudo tar -czf backup.tar.gz /var/www/aroha-app`\n\n**Monitoring:**\n- Enable Azure Monitor\n- Or use: `pm2 install pm2-logrotate`\n\n**Static IP:**\n- Configure static IP in Azure to prevent IP changes\n- Networking → Public IP → Configuration → Static\n\n## Cost Estimate (Azure)\n\n- **VM (B1s)**: ~$7-10/month\n- **Database (Neon free tier)**: $0\n- **Bandwidth**: Usually free for moderate usage\n- **Total**: ~$7-10/month\n\nPlus pay-per-use:\n- OpenAI Realtime API: ~$0.06/minute\n- Google Maps: Free (28k loads/month)\n\n---\n\n## 🎉 You're Done!\n\nYour app is now running on Azure! Access it at: `http://YOUR_AZURE_IP`\n\nQuestions? Check the logs with `pm2 logs aroha-app` or Nginx logs.\n\n**Next steps:**\n1. Get a domain name for HTTPS\n2. Setup SSL with Let's Encrypt\n3. Configure auto-backups\n4. Test all features thoroughly\n\nEnjoy your self-hosted voice & map application! 🚀\n","size_bytes":9677},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"design_guidelines.md":{"content":"# Design Guidelines: Voice & Map Input Application\n\n## Design Approach\n**Selected Approach:** Design System - Minimalist Utility  \n**Rationale:** This is a function-focused tool requiring clarity and efficiency. Drawing from Google's Material Design principles for clean, purposeful interfaces with emphasis on usability over decoration.\n\n**Core Principles:**\n- Clarity and precision in every element\n- Purposeful negative space\n- Clear visual hierarchy for interactive elements\n- Professional, distraction-free interface\n\n---\n\n## Layout Structure\n\n**Viewport Strategy:**\n- Single-page application with full viewport height (100vh)\n- Fixed positioning for mic button ensures constant accessibility\n- Map container occupies majority of vertical space\n\n**Layout Composition:**\n```\n┌─────────────────────────────────┐\n│   Map Search Field & Controls   │  (80-100px height)\n├─────────────────────────────────┤\n│                                 │\n│      Google Maps Display        │  (Flex-grow fills space)\n│                                 │\n│                                 │\n└─────────────────────────────────┘\n        [Mic Button]                   (Fixed bottom-center)\n```\n\n**Spacing Primitives:**\nUse Tailwind units: **4, 6, 8, 12, 16** for consistent rhythm\n- Component padding: p-6 or p-8\n- Section gaps: gap-4 or gap-6\n- Large spacing: mt-12 or mb-16\n\n---\n\n## Typography\n\n**Font Stack:**\n- Primary: Inter (Google Fonts) - clean, modern sans-serif\n- Weights: 400 (regular), 500 (medium), 600 (semibold)\n\n**Type Scale:**\n- Map search input: text-base (16px) - weight-400\n- Button labels: text-sm (14px) - weight-500\n- Helper text: text-xs (12px) - weight-400\n- Map controls: text-sm (14px) - weight-500\n\n---\n\n## Component Library\n\n### 1. Map Search Field (Top Section)\n- Full-width container with max-w-4xl centered\n- Input field with sharp, minimal styling (1px border, 2px focus ring)\n- Height: h-12 (48px) for comfortable touch targets\n- Include search icon (Heroicons: MagnifyingGlassIcon) positioned left inside input\n- Optional current location button positioned right (Heroicons: MapPinIcon)\n- Autocomplete dropdown appears below with subtle shadow\n\n### 2. Google Maps Container\n- Takes remaining vertical space using flex-1\n- No additional borders or frames - map fills edge-to-edge\n- Maintains Google Maps default controls in their standard positions\n\n### 3. Microphone Button (Bottom-Center, Fixed)\n- Position: fixed bottom-8 left-1/2 -translate-x-1/2\n- Size: w-16 h-16 (64x64px) - substantial touch target\n- Shape: Fully rounded (rounded-full)\n- Icon: Heroicons MicrophoneIcon, size w-6 h-6\n- Shadow: Deep shadow for elevation (shadow-2xl)\n- States:\n  - Inactive: Solid fill, subtle pulse animation on hover\n  - Active/Recording: Pulsing border animation, filled center\n  - Disabled: Reduced opacity (opacity-40)\n\n### 4. Visual Feedback Elements\n- Recording indicator: Small red dot (w-3 h-3) positioned top-right of mic button when active\n- Toast notifications: Top-center position for permission requests or errors\n- Loading states: Subtle skeleton loaders for map initialization\n\n---\n\n## Interaction Patterns\n\n**Microphone Button:**\n- Single click to start recording\n- Click again or automatic stop after input\n- Clear visual state changes (not just color - add scale transform on active)\n- Haptic-style feedback with subtle scale animation (scale-95 on click)\n\n**Map Interactions:**\n- Standard Google Maps gestures (zoom, pan, street view)\n- Search updates map position smoothly with animated transition\n- Clear visual focus states for all interactive elements (2px ring)\n\n**Accessibility:**\n- All interactive elements have minimum 44x44px touch targets\n- Clear focus indicators for keyboard navigation\n- ARIA labels for icon-only buttons\n- Screen reader announcements for recording states\n\n---\n\n## Responsive Behavior\n\n**Mobile (< 768px):**\n- Map search field: Full width with px-4 padding\n- Mic button: Slightly smaller (w-14 h-14) but maintains fixed bottom position\n- Map controls: Use Google Maps' built-in responsive behavior\n\n**Desktop (≥ 768px):**\n- Map search constrained to max-w-2xl with mx-auto\n- Mic button: Standard size (w-16 h-16)\n- Additional padding and breathing room\n\n---\n\n## Animation Guidelines\n\n**Minimal, Purposeful Motion:**\n- Mic button: Subtle scale on click (duration-100), pulse during recording (duration-1000, repeat)\n- Map transitions: 300ms ease-in-out for position changes\n- Focus rings: Instant appearance (duration-0)\n- Toast notifications: Slide in from top (duration-200)\n\n**No decorative animations** - only functional feedback that communicates state changes.\n\n---\n\n## Images Section\n\n**No images required for this application.** This is a pure utility interface focused on map display and voice input functionality. The visual interest comes from the interactive Google Maps content itself.","size_bytes":5083},"GOOGLE_MAPS_SETUP.md":{"content":"# Google Maps API Setup Guide\n\n## Required APIs\n\nFor the voice-controlled map application to work fully, your Google Maps API key must have **three** APIs enabled:\n\n### 1. Maps JavaScript API ✅\nAlready enabled (this is what shows the map)\n\n### 2. Geocoding API ⚠️ **REQUIRED**\nThis converts location names (like \"New York City\") into coordinates for searching.\n\n### 3. Directions API ⚠️ **REQUIRED**\nThis provides routing information between two locations for showing routes on the map.\n\n## How to Enable Required APIs\n\n### Step 1: Access Google Cloud Console\n1. Go to [Google Cloud Console](https://console.cloud.google.com/)\n2. Sign in with your Google account\n\n### Step 2: Select Your Project\n1. Click **\"Select a project\"** at the top of the page\n2. Choose the project that contains your API key\n3. Click **\"Open\"**\n\n### Step 3: Navigate to API Library\n1. From the left menu, go to **APIs & Services** → **Library**\n   - Alternatively, click **\"+ ENABLE APIS AND SERVICES\"** at the top of the Dashboard\n\n### Step 4: Enable Geocoding API\n1. Search for **\"Geocoding API\"** in the search bar\n2. Click on **\"Geocoding API\"** from the results\n3. Click the **\"ENABLE\"** button\n4. Wait for confirmation\n\n### Step 5: Enable Directions API\n1. Search for **\"Directions API\"** in the search bar\n2. Click on **\"Directions API\"** from the results\n3. Click the **\"ENABLE\"** button\n4. Wait for confirmation\n\n### Step 6: Verify Your API Key (Important!)\n1. Go to **APIs & Services** → **Credentials**\n2. Find your API key (the one stored in `VITE_GOOGLE_MAPS_API_KEY`)\n3. Click **\"EDIT\"** (pencil icon)\n4. Under **API restrictions**, make sure it includes:\n   - Maps JavaScript API ✅\n   - Geocoding API ✅\n   - Directions API ✅\n5. Save changes\n6. Wait 2-3 minutes for the changes to propagate\n\n## Verify Your Setup\n\nAfter enabling both APIs:\n1. Wait 2-3 minutes for the changes to propagate\n2. Refresh your application\n3. **Test Location Search**: Try asking the AI to find a location: \"Show me Paris\"\n   - The map should successfully search and display the location\n4. **Test Directions**: Try asking for directions: \"Show me directions from New York to Boston\"\n   - The map should display a cyan route line between the two cities\n   - The AI will tell you the distance and travel time\n\n## Alternative: Using Places API\n\nIf you prefer not to enable the Geocoding API, you can use the Places API instead (which may already be enabled):\n- The Places API can also convert place names to coordinates\n- It's included in many Google Maps setups by default\n- However, it requires different code implementation\n\n## Current API Key Location\n\nYour Google Maps API key is stored in the environment variable:\n- `VITE_GOOGLE_MAPS_API_KEY`\n\nMake sure this key has the necessary APIs enabled in the Google Cloud Console.\n\n## Testing\n\nOnce both APIs are enabled, test with these commands:\n\n**Location Search:**\n- \"Find the Eiffel Tower\"\n- \"Show me New York City\"\n- \"Where is the Golden Gate Bridge?\"\n\n**Directions:**\n- \"Show me directions from Paris to London\"\n- \"How do I get from the Eiffel Tower to the Louvre?\"\n- \"Route from New York to Boston\"\n\nThe AI should successfully locate places, draw routes on the map, and provide distance and travel time information.\n\n## Troubleshooting\n\n### Still Getting \"REQUEST_DENIED\" Error?\n1. **Wait 2-3 minutes** after enabling the API - changes take time to propagate\n2. **Check API Restrictions** on your API key:\n   - Go to **APIs & Services** → **Credentials**\n   - Edit your API key\n   - Make sure \"Geocoding API\" is checked under API restrictions\n3. **Refresh the application** - Clear browser cache if needed\n\n### Rate Limit Errors (OVER_QUERY_LIMIT)\n- **Free tier**: $200 monthly credit (~40,000 geocoding requests)\n- **Quota resets**: Daily at midnight Pacific time\n- **Solution**: Wait until quota resets or enable billing for higher limits\n\n### \"Location Not Found\" Errors (ZERO_RESULTS)\n- Try more specific search terms\n- Include city or country names: \"Paris, France\" instead of just \"Paris\"\n- Use full addresses when possible\n\n### Alternative: Places API\nIf you prefer not to use the Geocoding API, you can enable the **Places API** instead:\n1. Follow the same steps but enable \"Places API\"\n2. Note: Places API may have different pricing\n3. Code changes would be required to use Places API for geocoding\n","size_bytes":4352},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"backup_20251108_110344/QUICK_START.md":{"content":"# Quick Start Guide\n\n## On Your New Server\n\n1. **Upload all project files to your server**\n\n2. **Install dependencies**\n   ```bash\n   npm install\n   ```\n\n3. **Create .env file**\n   ```bash\n   cp env_variables.txt .env\n   # Edit .env and update DATABASE_URL if needed\n   ```\n\n4. **Build the application**\n   ```bash\n   npm run build\n   ```\n\n5. **Push database schema**\n   ```bash\n   npx drizzle-kit push:pg\n   ```\n\n6. **Start with PM2**\n   ```bash\n   pm2 start npm --name aroha-app -- run dev\n   pm2 save\n   pm2 startup\n   ```\n\n7. **Access your app**\n   - Local: http://localhost:5000\n   - Public: http://your-server-ip:5000\n\nSee BACKUP_AND_SELFHOST_GUIDE.md for complete instructions.\n","size_bytes":685},"AZURE_QUICK_COMMANDS.md":{"content":"# Azure VM Deployment - Quick Command Reference\n\nCopy and paste these commands in order. **Update values in CAPS with your actual details.**\n\n## 🔗 Step 1: Connect to Azure VM\n\n```bash\nssh azureuser@YOUR_AZURE_IP\n# Or with key: ssh -i /path/to/key.pem azureuser@YOUR_AZURE_IP\n```\n\n## 📦 Step 2: Install Software (Run Once)\n\n```bash\n# Update and install everything\nsudo apt update && sudo apt upgrade -y\ncurl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -\nsudo apt install -y nodejs nginx\nsudo npm install -g pm2\n\n# Create app directory\nsudo mkdir -p /var/www/aroha-app\nsudo chown -R $USER:$USER /var/www/aroha-app\ncd /var/www/aroha-app\n```\n\n## 📤 Step 3: Upload Files (From Your Computer)\n\n**Open NEW terminal on your local computer:**\n\n```bash\n# Navigate to extracted Replit download\ncd /path/to/extracted/project\n\n# Upload to Azure (replace YOUR_AZURE_IP)\nscp -r * azureuser@YOUR_AZURE_IP:/var/www/aroha-app/\n```\n\n## ⚙️ Step 4: Configure Environment (On Azure VM)\n\n```bash\ncd /var/www/aroha-app\n\n# Create .env file\ncat > .env << 'EOF'\nDATABASE_URL=YOUR_NEON_DATABASE_URL_HERE\nOPENAI_API_KEY=YOUR_OPENAI_KEY_HERE\nVITE_GOOGLE_MAPS_API_KEY=YOUR_GOOGLE_MAPS_KEY_HERE\nNODE_ENV=production\nPORT=5000\nEOF\n\n# Edit with your actual values\nnano .env\n# Ctrl+O to save, Enter, Ctrl+X to exit\n```\n\n## 🏗️ Step 5: Build and Deploy\n\n```bash\ncd /var/www/aroha-app\n\n# Install and build\nnpm install\nnpm run build\n\n# Setup database\nnpx drizzle-kit push:pg\n\n# Start with PM2\npm2 start npm --name aroha-app -- run dev\npm2 save\npm2 startup\n# ^ IMPORTANT: Run the command it shows you\n```\n\n## 🌐 Step 6: Configure Nginx\n\n```bash\n# Create Nginx config\nsudo cat > /etc/nginx/sites-available/aroha-app << 'EOF'\nserver {\n    listen 80;\n    server_name YOUR_AZURE_IP;\n\n    location / {\n        proxy_pass http://localhost:5000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n        proxy_read_timeout 300s;\n        proxy_connect_timeout 75s;\n    }\n}\nEOF\n\n# Replace YOUR_AZURE_IP with actual IP\nsudo nano /etc/nginx/sites-available/aroha-app\n\n# Enable site\nsudo ln -s /etc/nginx/sites-available/aroha-app /etc/nginx/sites-enabled/\nsudo rm -f /etc/nginx/sites-enabled/default\nsudo nginx -t\nsudo systemctl restart nginx\n```\n\n## 🔥 Step 7: Open Ports in Azure Portal\n\n**In Azure Portal → Your VM → Networking → Add inbound rules:**\n\n1. Port 80 (HTTP)\n2. Port 443 (HTTPS)  \n3. Port 22 (SSH) - if not already open\n\n## ✅ Test: Open Browser\n\n```\nhttp://YOUR_AZURE_IP\n```\n\n---\n\n## 🛠️ Daily Commands\n\n```bash\n# View logs\npm2 logs aroha-app\n\n# Restart app\npm2 restart aroha-app\n\n# Check status\npm2 status\n\n# Monitor\npm2 monit\n\n# Stop app\npm2 stop aroha-app\n```\n\n## 🔄 Update App\n\n```bash\n# Upload new files from local computer\nscp -r * azureuser@YOUR_AZURE_IP:/var/www/aroha-app/\n\n# On Azure VM\ncd /var/www/aroha-app\nnpm install\nnpm run build\npm2 restart aroha-app\n```\n\n## 🐛 Troubleshooting\n\n```bash\n# App not working?\npm2 logs aroha-app --lines 100\n\n# Nginx issues?\nsudo nginx -t\nsudo systemctl status nginx\nsudo tail -f /var/log/nginx/error.log\n\n# Start fresh\npm2 delete aroha-app\ncd /var/www/aroha-app\npm2 start npm --name aroha-app -- run dev\n```\n\n## 🔒 Optional: Add HTTPS (with domain)\n\n```bash\nsudo apt install -y certbot python3-certbot-nginx\nsudo certbot --nginx -d your-domain.com\n```\n\n---\n\n**That's it!** App should be running at `http://YOUR_AZURE_IP` 🚀\n","size_bytes":3543},"client/src/components/examples/MapContainer.tsx":{"content":"import MapContainer from '../MapContainer';\n\nexport default function MapContainerExample() {\n  return (\n    <MapContainer \n      onLocationChange={(location) => {\n        console.log('Location changed:', location);\n      }}\n    />\n  );\n}\n","size_bytes":238},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 0 0% 100%;\n\n  --foreground: 0 0% 9%;\n\n  --border: 0 0% 89%;\n\n  --card: 0 0% 98%;\n\n  --card-foreground: 0 0% 9%;\n\n  --card-border: 0 0% 92%;\n\n  --sidebar: 0 0% 96%;\n\n  --sidebar-foreground: 0 0% 9%;\n\n  --sidebar-border: 0 0% 90%;\n\n  --sidebar-primary: 0 0% 9%;\n\n  --sidebar-primary-foreground: 0 0% 98%;\n\n  --sidebar-accent: 0 0% 93%;\n\n  --sidebar-accent-foreground: 0 0% 9%;\n\n  --sidebar-ring: 0 0% 20%;\n\n  --popover: 0 0% 95%;\n\n  --popover-foreground: 0 0% 9%;\n\n  --popover-border: 0 0% 88%;\n\n  --primary: 0 0% 9%;\n\n  --primary-foreground: 0 0% 98%;\n\n  --secondary: 0 0% 91%;\n\n  --secondary-foreground: 0 0% 9%;\n\n  --muted: 220 5% 92%;\n\n  --muted-foreground: 220 5% 35%;\n\n  --accent: 220 8% 93%;\n\n  --accent-foreground: 220 8% 12%;\n\n  --destructive: 0 84% 35%;\n\n  --destructive-foreground: 0 84% 98%;\n\n  --input: 0 0% 75%;\n  --ring: 0 0% 20%;\n  --chart-1: 210 85% 35%;\n  --chart-2: 280 75% 38%;\n  --chart-3: 160 70% 32%;\n  --chart-4: 30 85% 40%;\n  --chart-5: 340 80% 38%;\n\n  --font-sans: Inter, system-ui, -apple-system, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: ui-monospace, 'Cascadia Code', monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.05);\n  --shadow-xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.06);\n  --shadow-sm: 0px 1px 3px 0px hsl(0 0% 0% / 0.08), 0px 1px 2px -1px hsl(0 0% 0% / 0.06);\n  --shadow: 0px 1px 3px 0px hsl(0 0% 0% / 0.10), 0px 1px 2px -1px hsl(0 0% 0% / 0.08);\n  --shadow-md: 0px 4px 6px -1px hsl(0 0% 0% / 0.08), 0px 2px 4px -2px hsl(0 0% 0% / 0.06);\n  --shadow-lg: 0px 10px 15px -3px hsl(0 0% 0% / 0.08), 0px 4px 6px -4px hsl(0 0% 0% / 0.06);\n  --shadow-xl: 0px 20px 25px -5px hsl(0 0% 0% / 0.08), 0px 8px 10px -6px hsl(0 0% 0% / 0.06);\n  --shadow-2xl: 0px 25px 50px -12px hsl(0 0% 0% / 0.20);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 0 0% 7%;\n\n  --foreground: 0 0% 98%;\n\n  --border: 0 0% 18%;\n\n  --card: 0 0% 9%;\n\n  --card-foreground: 0 0% 98%;\n\n  --card-border: 0 0% 15%;\n\n  --sidebar: 0 0% 11%;\n\n  --sidebar-foreground: 0 0% 98%;\n\n  --sidebar-border: 0 0% 17%;\n\n  --sidebar-primary: 0 0% 98%;\n\n  --sidebar-primary-foreground: 0 0% 9%;\n\n  --sidebar-accent: 0 0% 14%;\n\n  --sidebar-accent-foreground: 0 0% 98%;\n\n  --sidebar-ring: 0 0% 80%;\n\n  --popover: 0 0% 12%;\n\n  --popover-foreground: 0 0% 98%;\n\n  --popover-border: 0 0% 19%;\n\n  --primary: 0 0% 98%;\n\n  --primary-foreground: 0 0% 9%;\n\n  --secondary: 0 0% 16%;\n\n  --secondary-foreground: 0 0% 98%;\n\n  --muted: 220 5% 15%;\n\n  --muted-foreground: 220 5% 70%;\n\n  --accent: 220 8% 14%;\n\n  --accent-foreground: 220 8% 95%;\n\n  --destructive: 0 84% 35%;\n\n  --destructive-foreground: 0 84% 98%;\n\n  --input: 0 0% 30%;\n  --ring: 0 0% 80%;\n  --chart-1: 210 85% 70%;\n  --chart-2: 280 75% 75%;\n  --chart-3: 160 70% 68%;\n  --chart-4: 30 85% 72%;\n  --chart-5: 340 80% 72%;\n\n  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.30);\n  --shadow-xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.40);\n  --shadow-sm: 0px 1px 3px 0px hsl(0 0% 0% / 0.50), 0px 1px 2px -1px hsl(0 0% 0% / 0.40);\n  --shadow: 0px 1px 3px 0px hsl(0 0% 0% / 0.60), 0px 1px 2px -1px hsl(0 0% 0% / 0.50);\n  --shadow-md: 0px 4px 6px -1px hsl(0 0% 0% / 0.50), 0px 2px 4px -2px hsl(0 0% 0% / 0.40);\n  --shadow-lg: 0px 10px 15px -3px hsl(0 0% 0% / 0.50), 0px 4px 6px -4px hsl(0 0% 0% / 0.40);\n  --shadow-xl: 0px 20px 25px -5px hsl(0 0% 0% / 0.50), 0px 8px 10px -6px hsl(0 0% 0% / 0.40);\n  --shadow-2xl: 0px 25px 50px -12px hsl(0 0% 0% / 0.60);\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":11074}},"version":2}